var Rack={widget:{},app:{},abs:{},util:{}};Ext.BLANK_IMAGE_URL='/ui/v2/rui/resources/images/s.gif';Function.prototype.si=function(v){try{return v instanceof this;}catch(e){return false;}};Boolean.si=function(v){return typeof v==='boolean';};Number.si=function(v){return typeof v==='number'&&isFinite(v);};String.si=function(v){return typeof v==='string';};Array.si=function(v){return v&&typeof v==='object'&&typeof v.length==='number'&&!(v.propertyIsEnumerable('length'));};function typeOf(value){var s=typeof value;if(s==='object'){if(value){if(typeof value.length==='number'&&!(value.propertyIsEnumerable('length'))&&typeof value.splice==='function'){s='array';}}else{s='null';}}
return s;}
function isEmpty(o){var i,v;if(typeOf(o)==='object'){for(i in o){v=o[i];if(v!==undefined&&typeOf(v)!=='function'){return false;}}}
return true;}
String.prototype.entityify=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");};String.prototype.quote=function(){var c,i,l=this.length,o='"';for(i=0;i<l;i+=1){c=this.charAt(i);if(c>=' '){if(c==='\\'||c==='"'){o+='\\';}
o+=c;}else{switch(c){case'\b':o+='\\b';break;case'\f':o+='\\f';break;case'\n':o+='\\n';break;case'\r':o+='\\r';break;case'\t':o+='\\t';break;default:c=c.charCodeAt();o+='\\u00'+Math.floor(c/16).toString(16)+
(c%16).toString(16);}}}
return o+'"';};String.prototype.supplant=function(o){return this.replace(/{([^{}]*)}/g,function(a,b){var r=o[b];return typeof r==='string'||typeof r==='number'?r:a;});};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};if(!Array.prototype.forEach){Array.prototype.forEach=function(fun){var len=this.length,thisp=arguments[1],i=0;if(typeof fun!=="function"){throw new TypeError();}
for(;i<len;i++){if(i in this){fun.call(thisp,this[i],i,this);}}};}
if(!Array.prototype.filter){Array.prototype.filter=function(fun){var len=this.length;var res=[];var thisp=arguments[1];var i=0,val;if(typeof fun!=="function"){throw new TypeError();}
for(;i<len;i++){if(i in this){val=this[i];if(fun.call(thisp,val,i,this)){res.push(val);}}}
return res;};}
if(!Array.prototype.map){Array.prototype.map=function(fun){var len=this.length;var res=[];var thisp=arguments[1];var i=0;if(typeof fun!=="function"){throw new TypeError();}
for(;i<len;i++){if(i in this){res[i]=fun.call(thisp,this[i],i,this);}}
return res;};}
if(!Array.prototype.some){Array.prototype.some=function(fun){var len=this.length,thisp=arguments[1],i=0;if(typeof fun!=="function"){throw new TypeError();}
for(;i<len;i++){if(i in this&&fun.call(thisp,this[i],i,this)){return true;}}
return false;};}
if(!Array.prototype.every){Array.prototype.every=function(fun){var len=this.length,thisp=arguments[1],i=0;if(typeof fun!=="function"){throw new TypeError();}
for(;i<len;i++){if(i in this&&!fun.call(thisp,this[i],i,this)){return false;}}
return true;};}
if(!Array.prototype.indexOf){Array.prototype.indexOf=function(elt){var len=this.length,from=Number(arguments[1])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len;}
for(;from<len;from++){if(from in this&&this[from]===elt){return from;}}
return-1;};}
if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(elt){var len=this.length,from=Number(arguments[1]);if(isNaN(from)){from=len-1;}else{from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len;}else if(from>=len){from=len-1;}}
for(;from>-1;from--){if(from in this&&this[from]===elt){return from;}}
return-1;};}
Rack.implement=function(cls){if(arguments.length<2){return;}
var cp=cls.prototype,inter;for(var i=1;i<arguments.length;i+=1){inter=arguments[i];Ext.applyIf(cp,inter);if(!cp.CLS_INTERFACES){cp.CLS_INTERFACES=[];}
cls.prototype.CLS_INTERFACES.push(inter);}};Rack.hasInterface=function(ins,inter){if(ins.CLS_INTERFACES&&ins.CLS_INTERFACES.indexOf&&(ins.CLS_INTERFACES.indexOf(inter)>-1)){return true;}
return false;};(function(){var RI=Rack.intercept=function(cls,ics){var cp=(typeof cls==="function")?cls.prototype:cls;var pts=null;var prop=null;var icsProps=RI.getAllProps(ics,true);for(var i=0;i<icsProps.length;i+=1){prop=icsProps[i];pts=ics[prop];RI.findPropMatches(cp,prop).forEach(function(p){if(typeof cp[p]==="function"){RI.handlePoints(cp,p,pts);}});}};RI.handlePoints=function(obj,prop,points){if(points.around){RI.applyAroundPoint(obj,prop,points.around);}
if(points.start){RI.applyStartPoint(obj,prop,points.start);}
if(points.end){RI.applyEndPoint(obj,prop,points.end);}
if(points.exception){RI.applyExceptionPoint(obj,prop,points.exception);}};RI.applyAroundPoint=function(obj,prop,point){var ofn=obj[prop];obj[prop]=function(){var t=this;return point.call(this,prop,ofn,arguments);};};RI.applyStartPoint=function(obj,prop,point){var ofn=obj[prop];obj[prop]=function(){var pargs=point.call(this,prop,arguments);return ofn.apply(this,(pargs!==undefined)?pargs:arguments);};};RI.applyEndPoint=function(obj,prop,point){var ofn=obj[prop];obj[prop]=function(){var retval=ofn.apply(this,arguments);var pretval=point.call(this,prop,retval);return(pretval!==undefined)?pretval:retval;};};RI.applyExceptionPoint=function(obj,prop,point){var ofn=obj[prop];obj[prop]=function(){try{return ofn.apply(this,arguments);}catch(e){point.call(this,prop,e);throw e;}};};RI.findPropMatches=function(obj,prop){var sp=prop.indexOf('*');if(sp<0){return[prop];}else if(sp>0){var pp=prop.substr(0,sp);return RI.getAllProps(obj,false).filter(function(p){return(p.substr(0,sp)===pp);});}else{return RI.getAllProps(obj,false);}};RI.getAllProps=function(obj,own){var props=[];for(var p in obj){props.push(p);}
if((props.indexOf('valueOf')===-1)&&(!own||(own&&obj.hasOwnProperty('valueOf')))){props.push('valueOf');}
if((props.indexOf('toString')===-1)&&(!own||(own&&obj.hasOwnProperty('toString')))){props.push('toString');}
if((props.indexOf('toLocaleString')===-1)&&(!own||(own&&obj.hasOwnProperty('toLocaleString')))){props.push('toLocaleString');}
return props;};})();var Property={create:function(reader,writer,options){options=options||{};if(!((typeof reader)==="function")){throw new TypeError("The reader must be a function.  Got "+(typeof reader)+" instead.");}
var fn=function(){var scope=options.scope||this;name=options.name||'undefined';if(arguments.length){if(!((typeof writer)==="function")){throw new Property.ReadOnlyError("This is a read only property. Object: "+scope+", Property: "+name);}
return writer.apply(scope,arguments);}else{return reader.apply(scope);}};if(options.scope){fn.toString=function(){var v=fn();return(v)?v.toString():'';};fn.valueOf=function(){var v=fn();return(v)?v.valueOf():null;};}
return fn;},factory:function(obj){return function(name,reader,writer){obj[name]=Property.create(reader,writer,{scope:obj,name:name});};}};Property.ReadOnlyError=function(msg){this.name="ReadOnlyError";this.message=msg;};Property.ReadOnlyError.prototype=new Error();Rack.observableFactory=function(obj){return function(name,reader,writer){var eventWriter=function(){var ret=writer.apply(this,arguments);this.fireEvent(name+"_updated",reader.call(this));return ret;};obj[name]=Property.create(reader,eventWriter,{scope:obj,name:name});obj[name].addListener=function(fn,scope){obj.addListener(name+"_updated",fn,scope);};obj[name].removeListener=function(fn,scope){obj.removeListener(name+"_updated",fn,scope);};};};Ext.override=function(oc,or){if(or){var p=oc.prototype;for(var m in or){p[m]=or[m];}
if(Ext.isIE){var rp=['valueOf','toString','toLocaleString'];for(var i=0;i<rp.length;i++){m=rp[i];if(or.hasOwnProperty(m)){p[m]=or[m];}}}}};(function(){var oldExtend=Ext.extend;Ext.extend=function(){var con=oldExtend.apply(null,arguments);con.implement=function(){var args=Array.prototype.slice.call(arguments);Rack.implement.apply(null,[this].concat(args));};con.prototype.hasInterface=con.hasInterface=function(i){return Rack.hasInterface(con,i);};con.intercept=function(o){Rack.intercept(con,o);};con.prototype.intercept=function(o){Rack.intercept(this,o);};con.extend=function(o){return Ext.extend(con,o);};return con;};})();Ext.grid.GridView.prototype.findCell=function(el){if(!el){return false;}
return this.fly(el).findParent(this.cellSelector,10);};Ext.override(Ext.util.Observable,{removeListener:function(eventName,fn,scope){if(typeof eventName==="object"){var o=eventName;for(var e in o){if(this.filterOptRe.test(e)){continue;}
if(typeof o[e]==="function"){this.removeListener(e,o[e],o.scope);}else{this.removeListener(e,o[e].fn,o[e].scope);}}
return;}
var ce=this.events[eventName.toLowerCase()];if(typeof ce==="object"){ce.removeListener(fn,scope);}},addProp:function(name,reader,writer){this.addProp=Rack.observableFactory(this);this.addProp(name,reader,writer);}});Ext.util.Observable.prototype.un=Ext.util.Observable.prototype.removeListener;Rack.util.Observable=Ext.util.Observable;Rack.ExtOverrides=function(){Ext.Button.override({onRender:function(ct,position){if(!this.template){if(!Ext.Button.buttonTemplate){Ext.Button.buttonTemplate=new Ext.Template('<table border="0" cellpadding="0" cellspacing="0" class="x-btn-wrap"><tbody><tr>','<td class="x-btn-left"><i>&#160;</i></td><td class="x-btn-center"><em unselectable="on"><button name="{0}" class="x-btn-text" type="{1}">{0}</button></em></td><td class="x-btn-right"><i>&#160;</i></td>',"</tr></tbody></table>");}
this.template=Ext.Button.buttonTemplate;}
var btn,targs=[this.text||'&#160;',this.type];if(position){btn=this.template.insertBefore(position,targs,true);}else{btn=this.template.append(ct,targs,true);}
var btnEl=btn.child(this.buttonSelector);btnEl.on('focus',this.onFocus,this);btnEl.on('blur',this.onBlur,this);this.initButtonEl(btn,btnEl);if(this.menu){this.el.child(this.menuClassTarget).addClass("x-btn-with-menu");}
Ext.ButtonToggleMgr.register(this);}});Ext.form.ComboBox.override({onRender:function(ct,position){Ext.form.ComboBox.superclass.onRender.call(this,ct,position);if(this.hiddenName){this.hiddenField=this.el.insertSibling({tag:'input',type:'hidden',name:this.hiddenName,id:(this.hiddenId||this.hiddenName)},'before',true);}
this.el.dom.name=this.fieldLabel.replace("'","").replace('"','');if(Ext.isGecko){this.el.dom.setAttribute('autocomplete','off');}
if(!this.lazyInit){this.initList();}else{this.on('focus',this.initList,this,{single:true});}
if(!this.editable){this.editable=true;this.setEditable(false);}}});};Ext.Panel.override({showFooter:function(anim,size){if(this.footerShown){return;}
this.footerShown=true;size=size||37;this.footer.setHeight(size,true);this.body.setHeight(this.body.getHeight()-size,anim);},hideFooter:function(anim){this.footerShown=false;var fh=this.footer.getHeight();this.body.setHeight(this.body.getHeight()+fh,anim);this.footer.setHeight(0,anim);}});Ext.override(Ext.Element,{mask:function(msg,msgCls,zLayer){if(this.getStyle("position")=="static"){this.setStyle("position","relative");}
if(this.getStyle("z-index")=="auto"||this.getStyle("z-index")==0){this.setStyle("z-index",1);}
if(this._maskMsg){this._maskMsg.remove();}
if(this._mask){this._mask.remove();}
this._mask=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask"},true);var maskLayer=zLayer||parseInt(this.getStyle("z-index"),10)+1;this._mask.setStyle("z-index",maskLayer.toString());this.addClass("x-masked");this._mask.setDisplayed(true);if(typeof(msg)==='string'){this._maskMsg=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask-msg",cn:{}},true);var mm=this._maskMsg;var maskMsgLayer=parseInt(this._mask.getStyle("z-index"),10)+1;mm.setStyle("z-index",maskMsgLayer.toString());mm.dom.className=msgCls?"ext-el-mask-msg "+msgCls:"ext-el-mask-msg";mm.dom.firstChild.innerHTML=msg;mm.setDisplayed(true);mm.center(this);}
if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&this.getStyle('height')=='auto'){this._mask.setSize(this.dom.clientWidth,this.getHeight());}
return this._mask;}});Rack.createCookie=function(name,value,expires,path,encode){if(expires){if(expires instanceof Date){expires="; expires="+expires.toGMTString();}else{var date=new Date();date.setTime(date.getTime()+(expires*24*60*60*1000));expires="; expires="+date.toGMTString();}}else{expires="";}
if(!path){path="/";}
if(encode){value=encodeURIComponent(value);}
document.cookie=name+"="+value+expires+"; path="+path;};Rack.readCookie=function(name,encoded){var nameEQ=name+"=";var ca=document.cookie.split(';');var c=null;for(var i=0;i<ca.length;i++){if(encoded){c=decodeURIComponent(ca[i]);}else{c=ca[i];}
while(c.charAt(0)===' '){c=c.substring(1,c.length);}
if(c.indexOf(nameEQ)==0){return c.substring(nameEQ.length,c.length);}}
return null;};Rack.eraseCookie=function(name){Rack.createCookie(name,"",-1);};Rack.msg=function(title,body){var msgCt=Rack.msg.msgCt;var msgTpl=Rack.msg.msgTpl;if(!msgCt){msgCt=Ext.DomHelper.insertFirst(document.body,{id:'msg-div',style:'width:300px; z-index:20000; position:absolute; padding-top:30px;'},true);Rack.msg.msgCt=msgCt;}
msgCt.alignTo(document,'t-t');var m=Ext.DomHelper.append(msgCt,{html:msgTpl.apply({'t':title,'b':body})},true);m.slideIn('t',{duration:0.5}).fadeIn({duration:0.5,endOpacity:0.80,concurrent:true}).pause(2).ghost('t',{remove:true});};Rack.msg.msgCt=null;Rack.msg.msgTpl=new Ext.Template('<div style="background-color:#eee; padding:15px; border:1px solid #ccc; font-size:110%; margin-bottom:5px;">','<b>{t}</b><br>{b}','</div>');Rack.msg.msgTpl.compile();Rack.error=function(title,body){Ext.Msg.show({title:title,msg:body,icon:Ext.Msg.ERROR,buttons:Ext.Msg.OK,width:400});};Rack.warn=function(title,body){Ext.Msg.show({title:title,msg:body,icon:Ext.Msg.WARNING,buttons:Ext.Msg.OK,width:400});};Ext.namespace('Rack.localStore');(function(){var ns=Rack.localStore;ns.set=function(key,value,life,overwrite){if(!window.globalStorage||!window.globalStorage[window.location.hostname]){return;}
var store=window.globalStorage[window.location.hostname];var now=new Date();var entry=Ext.encode({expires:now.setTime(now.getTime()+life),value:value});if(overwrite||(!overwrite&&!ns.get(key))){store[key]=entry;}};ns.get=function(key){if(!window.globalStorage||!window.globalStorage[window.location.hostname]){return;}
var store=window.globalStorage[window.location.hostname];var entry=store[key];if(entry){entry=Ext.decode(entry);if(entry.expires>(new Date()).getTime()){return entry.value;}}
return null;};})();Ext.namespace('Rack.abs');(function(){var supercon=Ext.util.Observable;var superproto=supercon.prototype;var con=Rack.abs.CommandableDocument=Ext.extend(supercon,{constructor:function(){this.commands=[];this.commandPtr=0;this.addEvents('cmd_executed','cmd_undone','cmd_redone');},execute:function(cmd){if(cmd.undo){this.commands[this.commandPtr]=cmd;this.commandPtr+=1;this.commands=this.commands.slice(0,this.commandPtr);}
cmd.execute(this);this.fireEvent('cmd_executed',this,cmd);return this;},undo:function(level){var i=0;var cmd=null;level=(level)?(typeof level==='object')?this.commandPtr-this.commands.indexOf(level):level:1;for(i=0;i<level;i++){if(this.commandPtr>0){this.commandPtr-=1;cmd=this.commands[this.commandPtr];cmd.undo(this);this.fireEvent('cmd_undone',this,cmd);}}
return this;},redo:function(level){var i=0;var cmd=null;level=(level)?(typeof level==='object')?this.commands.indexOf(level)+1-this.commandPtr:level:1;for(i=0;i<level;i++){if(this.commandPtr<this.commands.length){cmd=this.commands[this.commandPtr];this.commandPtr+=1;cmd.execute(this);this.fireEvent('cmd_redone',this,cmd);}}
return this;},getCommandHistory:function(){return this.commands;}});})();Ext.grid.CheckColumn=function(config){Ext.apply(this,config);if(!this.id){this.id=Ext.id();}
this.renderer=this.renderer.createDelegate(this);};Ext.grid.CheckColumn.prototype={init:function(grid){this.grid=grid;this.grid.on('render',function(){var view=this.grid.getView();view.mainBody.on('mousedown',this.onMouseDown,this);},this);},onMouseDown:function(e,t){if(t.className&&t.className.indexOf('x-grid3-cc-'+this.id)!=-1){e.stopEvent();var index=this.grid.getView().findRowIndex(t);var record=this.grid.store.getAt(index);record.set(this.dataIndex,!record.data[this.dataIndex]);}},renderer:function(v,p,record){p.css+=' x-grid3-check-col-td';return'<div class="x-grid3-check-col'+(v?'-on':'')+' x-grid3-cc-'+this.id+'">&#160;</div>';}};Ext.grid.RowExpander=function(config){Ext.apply(this,config);Ext.grid.RowExpander.superclass.constructor.call(this);if(this.tpl){if(typeof this.tpl=='string'){this.tpl=new Ext.Template(this.tpl);}
this.tpl.compile();}
this.state={};this.bodyContent={};this.addEvents({beforeexpand:true,expand:true,beforecollapse:true,collapse:true});};Ext.extend(Ext.grid.RowExpander,Ext.util.Observable,{header:"",width:20,sortable:false,fixed:true,dataIndex:'',id:'expander',lazyRender:true,enableCaching:true,getRowClass:function(record,rowIndex,p,ds){p.cols=p.cols-1;var content=this.bodyContent[record.id];if(!content&&!this.lazyRender){content=this.getBodyContent(record,rowIndex);}
if(content){p.body=content;}
return this.state[record.id]?'x-grid3-row-expanded':'x-grid3-row-collapsed';},init:function(grid){this.grid=grid;var view=grid.getView();view.getRowClass=this.getRowClass.createDelegate(this);view.enableRowBody=true;grid.on('render',function(){view.mainBody.on('mousedown',this.onMouseDown,this);},this);},getBodyContent:function(record,index){if(!this.enableCaching){return this.tpl.apply(record.data);}
var content=this.bodyContent[record.id];if(!content){content=this.tpl.apply(record.data);this.bodyContent[record.id]=content;}
return content;},onMouseDown:function(e,t){if(t.className=='x-grid3-row-expander'){e.stopEvent();var row=e.getTarget('.x-grid3-row');this.toggleRow(row);}},renderer:function(v,p,record){p.cellAttr='rowspan="2"';return'<div class="x-grid3-row-expander">&#160;</div>';},beforeExpand:function(record,body,rowIndex){if(this.fireEvent('beforexpand',this,record,body,rowIndex)!==false){if(this.tpl&&this.lazyRender){body.innerHTML=this.getBodyContent(record,rowIndex);}
return true;}else{return false;}},toggleRow:function(row){if(typeof row=='number'){row=this.grid.view.getRow(row);}
this[Ext.fly(row).hasClass('x-grid3-row-collapsed')?'expandRow':'collapseRow'](row);},expandRow:function(row){if(typeof row=='number'){row=this.grid.view.getRow(row);}
var record=this.grid.store.getAt(row.rowIndex);var body=Ext.DomQuery.selectNode('tr:nth(2) div.x-grid3-row-body',row);if(this.beforeExpand(record,body,row.rowIndex)){this.state[record.id]=true;Ext.fly(row).replaceClass('x-grid3-row-collapsed','x-grid3-row-expanded');this.fireEvent('expand',this,record,body,row.rowIndex);}},collapseRow:function(row){if(typeof row=='number'){row=this.grid.view.getRow(row);}
var record=this.grid.store.getAt(row.rowIndex);var body=Ext.fly(row).child('tr:nth(1) div.x-grid3-row-body',true);if(this.fireEvent('beforcollapse',this,record,body,row.rowIndex)!==false){this.state[record.id]=false;Ext.fly(row).replaceClass('x-grid3-row-expanded','x-grid3-row-collapsed');this.fireEvent('collapse',this,record,body,row.rowIndex);}}});(function(){var EV=Ext.lib.Event;Ext.ux.ManagedIFrame=function(){var args=Array.prototype.slice.call(arguments,0),el=Ext.get(args[0]),config=args[0];if(el&&el.dom&&el.dom.tagName=='IFRAME'){config=args[1]||{};}else{config=args[0]||args[1]||{};el=config.autoCreate?Ext.get(Ext.DomHelper.append(config.autoCreate.parent||document.body,Ext.apply({tag:'iframe',src:(Ext.isIE&&Ext.isSecure)?Ext.SSL_SECURE_URL:''},config.autoCreate))):null;}
if(!el||el.dom.tagName!='IFRAME')return el;el.dom.name||(el.dom.name=el.dom.id);this.addEvents({"focus":true,"blur":true,"unload":true,"domready":true,"documentloaded":true,"exception":true,"message":true});if(config.listeners){this.listeners=config.listeners;Ext.ux.ManagedIFrame.superclass.constructor.call(this);}
Ext.apply(el,this);el.addClass('x-managed-iframe');if(config.style){el.applyStyles(config.style);}
el._maskEl=el.parent('.x-managed-iframe-mask')||el.parent().addClass('x-managed-iframe-mask');Ext.apply(el,{disableMessaging:config.disableMessaging===true,loadMask:Ext.apply({msg:'Loading..',msgCls:'x-mask-loading',maskEl:el._maskEl,hideOnReady:true,disabled:!config.loadMask},config.loadMask),_eventName:Ext.isIE?'onreadystatechange':'onload',_windowContext:null,eventsFollowFrameLinks:typeof config.eventsFollowFrameLinks=='undefined'?true:config.eventsFollowFrameLinks});el.dom[el._eventName]=el.loadHandler.createDelegate(el);if(document.addEventListener){Ext.EventManager.on(window,"DOMFrameContentLoaded",el.dom[el._eventName]);}
var um=el.updateManager=new Ext.UpdateManager(el,true);um.showLoadIndicator=config.showLoadIndicator||false;if(config.src){el.setSrc(config.src);}else{var content=config.html||config.content||false;if(content){el.update.defer(10,el,[content]);}}
return Ext.ux.ManagedIFrame.Manager.register(el);};var MIM=Ext.ux.ManagedIFrame.Manager=function(){var frames={};return{shimCls:'x-frame-shim',register:function(frame){frame.manager=this;frames[frame.id]=frames[frame.dom.name]={ref:frame,elCache:{}};return frame;},deRegister:function(frame){frame._unHook();delete frames[frame.id];delete frames[frame.dom.name];},hideShims:function(){if(!this.shimApplied)return;Ext.select('.'+this.shimCls,true).removeClass(this.shimCls+'-on');this.shimApplied=false;},showShims:function(){if(!this.shimApplied){this.shimApplied=true;Ext.select('.'+this.shimCls,true).addClass(this.shimCls+'-on');}},getFrameById:function(id){return typeof id=='string'?(frames[id]?frames[id].ref||null:null):null;},getFrameByName:function(name){return this.getFrameById(name);},getFrameHash:function(frame){return frame.id?frames[frame.id]:null;},eventProxy:function(e){e=Ext.lib.Event.getEvent(e);if(!e)return;var be=e.browserEvent||e;if(e.type=='unload'){this._unHook();}
if(!be['eventPhase']||(be['eventPhase']==(be['AT_TARGET']||2))){return this.fireEvent(e.type,e);}},_flyweights:{},removeNode:Ext.isIE?function(frame,n){frame=MIM.getFrameHash(frame);if(frame&&n&&n.tagName!='BODY'){d=frame.scratchDiv||(frame.scratchDiv=frame.getDocument().createElement('div'));d.appendChild(n);d.innerHTML='';}}:function(frame,n){if(n&&n.parentNode&&n.tagName!='BODY'){n.parentNode.removeChild(n);}}}}();MIM.showDragMask=MIM.showShims;MIM.hideDragMask=MIM.hideShims;MIM.El=function(frame,el,forceNew){var frameObj;frame=(frameObj=MIM.getFrameHash(frame))?frameObj.ref:null;if(!frame){return null;}
var elCache=frameObj.elCache||(frameObj.elCache={});var dom=frame.getDom(el);if(!dom){return null;}
var id=dom.id;if(forceNew!==true&&id&&elCache[id]){return elCache[id];}
this.dom=dom;this.id=id||Ext.id(dom);};MIM.El.get=function(frame,el){var ex,elm,id,doc;if(!frame||!el){return null;}
var frameObj;frame=(frameObj=MIM.getFrameHash(frame))?frameObj.ref:null;if(!frame){return null;}
var elCache=frameObj.elCache||(frameObj.elCache={});if(!(doc=frame.getDocument())){return null;}
if(typeof el=="string"){if(!(elm=frame.getDom(el))){return null;}
if(ex=elCache[el]){ex.dom=elm;}else{ex=elCache[el]=new MIM.El(frame,elm);}
return ex;}else if(el.tagName){if(!(id=el.id)){id=Ext.id(el);}
if(ex=elCache[id]){ex.dom=el;}else{ex=elCache[id]=new MIM.El(frame,el);}
return ex;}else if(el instanceof MIM.El){if(el!=frameObj.docEl){el.dom=frame.getDom(el.id)||el.dom;elCache[el.id]=el;}
return el;}else if(el.isComposite){return el;}else if(Ext.isArray(el)){return frame.select(el);}else if(el==doc){if(!frameObj.docEl){var f=function(){};f.prototype=MIM.El.prototype;frameObj.docEl=new f();frameObj.docEl.dom=doc;}
return frameObj.docEl;}
return null;};Ext.apply(MIM.El.prototype,Ext.Element.prototype);Ext.extend(Ext.ux.ManagedIFrame,Ext.util.Observable,{src:null,setSrc:function(url,discardUrl,callback){var reset=Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:'';var src=url||this.src||reset;if(Ext.isOpera){this.dom.src=reset;}
this._windowContext=null;this._unHook();this._callBack=callback||false;this.showMask();(function(){var s=typeof src=='function'?src()||'':src;try{this._frameAction=true;this.dom.src=s;this.frameInit=true;this.checkDOM();}catch(ex){this.fireEvent('exception',this,ex);}}).defer(10,this);if(discardUrl!==true){this.src=src;}
return this;},reset:function(src,callback){this.setSrc(src||(Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:''),true,callback);},scriptRE:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,update:function(content,loadScripts,callback){loadScripts=loadScripts||this.getUpdateManager().loadScripts||false;content=Ext.DomHelper.markup(content||'');content=loadScripts===true?content:content.replace(this.scriptRE,"");var doc;if(doc=this.getDocument()){this._frameAction=!!content.length;this._windowContext=this.src=null;this._callBack=callback||false;this._unHook();this.showMask();doc.open();doc.write(content);doc.close();this.frameInit=true;if(this._frameAction){this.checkDOM();}else{this.hideMask(true);if(this._callBack)this._callBack();}}else{this.hideMask(true);if(this._callBack)this._callBack();}
return this;},disableMessaging:true,_XFrameMessaging:function(){var tagStack={'$':[]};var isEmpty=function(v,allowBlank){return v===null||v===undefined||(!allowBlank?v==='':false);};window.sendMessage=function(message,tag,origin){var MIF;if(MIF=arguments.callee.manager){if(message._fromHost){var fn,result;var compTag=message.tag||tag||null;var mstack=!isEmpty(compTag)?tagStack[compTag.toLowerCase()]||[]:tagStack["$"];for(var i=0,l=mstack.length;i<l;i++){if(fn=mstack[i]){result=fn.apply(fn.__scope,arguments)===false?false:result;if(fn.__single){mstack[i]=null;}
if(result===false){break;}}}
return result;}else{message={type:isEmpty(tag)?'message':'message:'+tag.toLowerCase().replace(/^\s+|\s+$/g,''),data:message,domain:origin||document.domain,uri:document.documentURI,source:window,tag:isEmpty(tag)?null:tag.toLowerCase()};try{return MIF.disableMessaging!==true?MIF.fireEvent.call(MIF,message.type,MIF,message):null;}catch(ex){}
return null;}}};window.onhostmessage=function(fn,scope,single,tag){if(typeof fn=='function'){if(!isEmpty(fn.__index)){throw"onhostmessage: duplicate handler definition"+(tag?" for tag:"+tag:'');}
var k=isEmpty(tag)?"$":tag.toLowerCase();tagStack[k]||(tagStack[k]=[]);Ext.apply(fn,{__tag:k,__single:single||false,__scope:scope||window,__index:tagStack[k].length});tagStack[k].push(fn);}else
{throw"onhostmessage: function required";}};window.unhostmessage=function(fn){if(typeof fn=='function'&&typeof fn.__index!='undefined'){var k=fn.__tag||"$";tagStack[k][fn.__index]=null;}};},get:function(el){return MIM.El.get(this,el);},fly:function(el,named){named=named||'_global';el=this.getDom(el);if(!el){return null;}
if(!MIM._flyweights[named]){MIM._flyweights[named]=new Ext.Element.Flyweight();}
MIM._flyweights[named].dom=el;return MIM._flyweights[named];},getDom:function(el){var d;if(!el||!(d=this.getDocument())){return null;}
return el.dom?el.dom:(typeof el=='string'?d.getElementById(el):el);},select:function(selector,unique){var d;return(d=this.getDocument())?Ext.Element.select(selector,unique,d):null;},query:function(selector){var d;return(d=this.getDocument())?Ext.DomQuery.select(selector,d):null;},getDoc:function(){return this.get(this.getDocument());},removeNode:function(node){MIM.removeNode(this,this.getDom(node));},_unHook:function(){var elcache,h=MIM.getFrameHash(this)||{};if(this._hooked&&h&&(elcache=h.elCache)){for(var id in elcache){var el=elcache[id];delete elcache[id];if(el.removeAllListeners)el.removeAllListeners();}
if(h.docEl){h.docEl.removeAllListeners();h.docEl=null;delete h.docEl;}}
this._hooked=this._domReady=this._domFired=false;},_renderHook:function(){this._windowContext=null;this._hooked=false;try{if(this.writeScript('(function(){(window.hostMIF = parent.Ext.get("'+
this.dom.id+'"))._windowContext='+
(Ext.isIE?'window':'{eval:function(s){return eval(s);}}')+';})();')){this._frameProxy||(this._frameProxy=MIM.eventProxy.createDelegate(this));EV.doAdd(this.getWindow(),'focus',this._frameProxy);EV.doAdd(this.getWindow(),'blur',this._frameProxy);EV.doAdd(this.getWindow(),'unload',this._frameProxy);if(this.disableMessaging!==true){this.loadFunction({name:'XMessage',fn:this._XFrameMessaging},false,true);var sm;if(sm=this.getWindow().sendMessage){sm.manager=this;}}
this.CSS=new CSSInterface(this.getDocument());}
return this.domWritable();}catch(ex){}
return false;},sendMessage:function(message,tag,origin){var win;if(this.disableMessaging!==true&&(win=this.getWindow())){tag||(tag=message.tag||'');tag=tag.toLowerCase();message=Ext.applyIf(message.data?message:{data:message},{type:Ext.isEmpty(tag)?'message':'message:'+tag,domain:origin||document.domain,uri:document.documentURI,source:window,tag:tag||null,_fromHost:this});return win.sendMessage?win.sendMessage.call(null,message,tag,origin):null;}
return null;},_windowContext:null,getDocument:function(){var win;return(win=this.getWindow())?win.document:null;},getBody:function(){var d;return(d=this.getDocument())?d.body:null;},getDocumentURI:function(){var URI;try{URI=this.src?this.getDocument().location.href:null;}catch(ex){}
return URI||this.src;},getWindow:function(){var dom=this.dom;return dom?dom.contentWindow||window.frames[dom.name]:null;},print:function(){try{var win=this.getWindow();if(Ext.isIE){win.focus();}
win.print();}catch(ex){throw'print exception: '+(ex.description||ex.message||ex);}},destroy:function(){this.removeAllListeners();if(this.dom){if(document.addEventListener){Ext.EventManager.un(window,"DOMFrameContentLoaded",this.dom[this._eventName]);}
this.dom[this._eventName]=null;Ext.ux.ManagedIFrame.Manager.deRegister(this);this._windowContext=null;if(Ext.isIE&&this.dom.src){this.dom.src='javascript:false';}
this._maskEl=null;Ext.removeNode(this.dom);}
Ext.apply(this.loadMask,{masker:null,maskEl:null});},domWritable:function(){return!!this._windowContext;},execScript:function(block,useDOM){try{if(this.domWritable()){if(useDOM){this.writeScript(block);}else{return this._windowContext.eval(block);}}else{throw'execScript:non-secure context'}}catch(ex){this.fireEvent('exception',this,ex);return false;}
return true;},writeScript:function(block,attributes){attributes=Ext.apply({},attributes||{},{type:"text/javascript",text:block});try{var head,script,doc=this.getDocument();if(doc&&doc.getElementsByTagName){if(!(head=doc.getElementsByTagName("head")[0])){head=doc.createElement("head");doc.getElementsByTagName("html")[0].appendChild(head);}
if(head&&(script=doc.createElement("script"))){for(var attrib in attributes){if(attributes.hasOwnProperty(attrib)&&attrib in script){script[attrib]=attributes[attrib];}}
return!!head.appendChild(script);}}}catch(ex){this.fireEvent('exception',this,ex);}
return false;},loadFunction:function(fn,useDOM,invokeIt){var name=fn.name||fn;var fn=fn.fn||window[fn];this.execScript(name+'='+fn,useDOM);if(invokeIt){this.execScript(name+'()');}},showMask:function(msg,msgCls,forced){var lmask;if((lmask=this.loadMask)&&(!lmask.disabled||forced)){if(lmask._vis)return;lmask.masker||(lmask.masker=Ext.get(lmask.maskEl||this.dom.parentNode||this.wrap({tag:'div',style:{position:'relative'}})));lmask._vis=true;lmask.masker.mask.defer(lmask.delay||5,lmask.masker,[msg||lmask.msg,msgCls||lmask.msgCls]);}},hideMask:function(forced){var tlm;if((tlm=this.loadMask)&&!tlm.disabled&&tlm.masker){if(!forced&&(tlm.hideOnReady!==true&&this._domReady)){return;}
tlm._vis=false;tlm.masker.unmask.defer(tlm.delay||5,tlm.masker);}},loadHandler:function(e){if(!this.frameInit||(!this._frameAction&&!this.eventsFollowFrameLinks)){return;}
var rstatus=(e&&typeof e.type!=='undefined'?e.type:this.dom.readyState);switch(rstatus){case'loading':case'interactive':break;case'DOMFrameContentLoaded':if(this._domFired||(e&&e.target!==this.dom)){return;}
case'domready':if(this._domFired)return;if(this._domFired=this._hooked=this._renderHook()){this._frameAction=(this.fireEvent("domready",this)===false?false:this._frameAction);}
case'domfail':this._domReady=true;this.hideMask();break;case'load':case'complete':if(!this._domFired){this.loadHandler({type:'domready'});}
this.hideMask(true);if(this._frameAction||this.eventsFollowFrameLinks){this.fireEvent.defer(50,this,["documentloaded",this]);}
this._frameAction=false;if(this.eventsFollowFrameLinks){this._domFired=this._domReady=false;}
if(this._callBack){this._callBack(this);}
break;default:}},checkDOM:function(win){if(Ext.isOpera)return;var n=0,win=win||this.getWindow(),manager=this,domReady=false,max=100;var poll=function(){try{domReady=false;var doc=win.document,body;if(!manager._domReady){domReady=(doc&&doc.getElementsByTagName);domReady=domReady&&(body=doc.getElementsByTagName('body')[0])&&!!body.innerHTML.length;}}catch(ex){n=max;}
if(!manager._frameAction||manager._domReady)return;if(n++<max&&!domReady)
{setTimeout(arguments.callee,10);return;}
manager.loadHandler({type:domReady?'domready':'domfail'});};setTimeout(poll,50);}});var styleCamelRe=/(-[a-z])/gi;var styleCamelFn=function(m,a){return a.charAt(1).toUpperCase();};var CSSInterface=function(hostDocument){var doc;if(hostDocument){doc=hostDocument;return{rules:null,createStyleSheet:function(cssText,id){var ss;if(!doc)return;var head=doc.getElementsByTagName("head")[0];var rules=doc.createElement("style");rules.setAttribute("type","text/css");if(id){rules.setAttribute("id",id);}
if(Ext.isIE){head.appendChild(rules);ss=rules.styleSheet;ss.cssText=cssText;}else{try{rules.appendChild(doc.createTextNode(cssText));}catch(e){rules.cssText=cssText;}
head.appendChild(rules);ss=rules.styleSheet?rules.styleSheet:(rules.sheet||doc.styleSheets[doc.styleSheets.length-1]);}
this.cacheStyleSheet(ss);return ss;},removeStyleSheet:function(id){if(!doc)return;var existing=doc.getElementById(id);if(existing){existing.parentNode.removeChild(existing);}},swapStyleSheet:function(id,url){this.removeStyleSheet(id);if(!doc)return;var ss=doc.createElement("link");ss.setAttribute("rel","stylesheet");ss.setAttribute("type","text/css");ss.setAttribute("id",id);ss.setAttribute("href",url);doc.getElementsByTagName("head")[0].appendChild(ss);},refreshCache:function(){return this.getRules(true);},cacheStyleSheet:function(ss){if(this.rules){this.rules={};}
try{var ssRules=ss.cssRules||ss.rules;for(var j=ssRules.length-1;j>=0;--j){this.rules[ssRules[j].selectorText]=ssRules[j];}}catch(e){}},getRules:function(refreshCache){if(this.rules==null||refreshCache){this.rules={};if(doc){var ds=doc.styleSheets;for(var i=0,len=ds.length;i<len;i++){try{this.cacheStyleSheet(ds[i]);}catch(e){}}}}
return this.rules;},getRule:function(selector,refreshCache){var rs=this.getRules(refreshCache);if(!Ext.isArray(selector)){return rs[selector];}
for(var i=0;i<selector.length;i++){if(rs[selector[i]]){return rs[selector[i]];}}
return null;},updateRule:function(selector,property,value){if(!Ext.isArray(selector)){var rule=this.getRule(selector);if(rule){rule.style[property.replace(styleCamelRe,styleCamelFn)]=value;return true;}}else{for(var i=0;i<selector.length;i++){if(this.updateRule(selector[i],property,value)){return true;}}}
return false;}};}};Ext.ux.ManagedIframePanel=Ext.extend(Ext.Panel,{defaultSrc:null,bodyStyle:{height:'100%',width:'100%',position:'relative'},frameStyle:{overflow:'auto'},frameConfig:null,hideMode:!Ext.isIE?'nosize':'display',shimCls:Ext.ux.ManagedIFrame.Manager.shimCls,shimUrl:null,loadMask:false,animCollapse:Ext.isIE,autoScroll:false,closable:true,ctype:"Ext.ux.ManagedIframePanel",showLoadIndicator:false,unsupportedText:'Inline frames are NOT enabled\/supported by your browser.',initComponent:function(){var unsup=this.unsupportedText?{html:this.unsupportedText}:false;this.bodyCfg||(this.bodyCfg={tag:'div',cls:'x-panel-body',children:[{cls:'x-managed-iframe-mask',children:[Ext.apply(Ext.apply({tag:'iframe',frameborder:0,cls:'x-managed-iframe',style:this.frameStyle||null},this.frameConfig),unsup,Ext.isIE&&Ext.isSecure?{src:Ext.SSL_SECURE_URL}:false),{tag:'img',src:this.shimUrl||Ext.BLANK_IMAGE_URL,cls:this.shimCls}]}]});this.autoScroll=false;this.items=null;if(this.stateful!==false){this.stateEvents||(this.stateEvents=['documentloaded']);}
Ext.ux.ManagedIframePanel.superclass.initComponent.call(this);this.monitorResize||(this.monitorResize=this.fitToParent);this.addEvents({documentloaded:true,domready:true,message:true,exception:true});this.addListener=this.on;},doLayout:function(){if(this.fitToParent&&!this.ownerCt){var pos=this.getPosition(),size=(Ext.get(this.fitToParent)||this.getEl().parent()).getViewSize();this.setSize(size.width-pos[0],size.height-pos[1]);}
Ext.ux.ManagedIframePanel.superclass.doLayout.apply(this,arguments);},beforeDestroy:function(){if(this.rendered){if(this.tools){for(var k in this.tools){Ext.destroy(this.tools[k]);}}
if(this.header&&this.headerAsText){var s;if(s=this.header.child('span'))s.remove();this.header.update('');}
Ext.each(['iframe','shim','header','topToolbar','bottomToolbar','footer','loadMask','body','bwrap'],function(elName){if(this[elName]){if(typeof this[elName].destroy=='function'){this[elName].destroy();}else{Ext.destroy(this[elName]);}
this[elName]=null;delete this[elName];}},this);}
Ext.ux.ManagedIframePanel.superclass.beforeDestroy.call(this);},onDestroy:function(){Ext.Panel.superclass.onDestroy.call(this);},onRender:function(ct,position){Ext.ux.ManagedIframePanel.superclass.onRender.call(this,ct,position);if(this.iframe=this.body.child('iframe.x-managed-iframe')){var El=Ext.Element;var mode=El[this.hideMode.toUpperCase()]||'x-hide-nosize';Ext.each([this[this.collapseEl],this.floating?null:this.getActionEl(),this.iframe],function(el){if(el)el.setVisibilityMode(mode);},this);if(this.loadMask){this.loadMask=Ext.apply({disabled:false,maskEl:this.body,hideOnReady:true},this.loadMask);}
if(this.iframe=new Ext.ux.ManagedIFrame(this.iframe,{loadMask:this.loadMask,showLoadIndicator:this.showLoadIndicator,disableMessaging:this.disableMessaging,style:this.frameStyle})){this.loadMask=this.iframe.loadMask;this.iframe.ownerCt=this;this.relayEvents(this.iframe,["blur","focus","unload","documentloaded","domready","exception","message"].concat(this._msgTagHandlers||[]));delete this._msgTagHandlers;}
this.getUpdater().showLoadIndicator=this.showLoadIndicator||false;var ownerCt=this.ownerCt;while(ownerCt){ownerCt.on('afterlayout',function(container,layout){var MIM=Ext.ux.ManagedIFrame.Manager,st=false;Ext.each(['north','south','east','west'],function(region){var reg;if((reg=layout[region])&&reg.splitEl){st=true;if(!reg.split._splitTrapped){reg.split.on('beforeresize',MIM.showShims,MIM);reg.split._splitTrapped=true;}}},this);if(st&&!this._splitTrapped){this.on('resize',MIM.hideShims,MIM);this._splitTrapped=true;}},this,{single:true});ownerCt=ownerCt.ownerCt;}}
this.shim=Ext.get(this.body.child('.'+this.shimCls));},toggleShim:function(){if(this.shim&&this.shimCls)this.shim.toggleClass(this.shimCls+'-on');},afterRender:function(container){var html=this.html;delete this.html;Ext.ux.ManagedIframePanel.superclass.afterRender.call(this);if(this.iframe){if(this.defaultSrc){this.setSrc();}
else if(html){this.iframe.update(typeof html=='object'?Ext.DomHelper.markup(html):html);}}},sendMessage:function(){if(this.iframe){this.iframe.sendMessage.apply(this.iframe,arguments);}},on:function(name){var tagRE=/^message\:/i,n=null;if(typeof name=='object'){for(var na in name){if(!this.filterOptRe.test(na)&&tagRE.test(na)){n||(n=[]);n.push(na.toLowerCase());}}}else if(tagRE.test(name)){n=[name.toLowerCase()];}
if(this.getFrame()&&n){this.relayEvents(this.iframe,n);}else{this._msgTagHandlers||(this._msgTagHandlers=[]);if(n)this._msgTagHandlers=this._msgTagHandlers.concat(n);}
Ext.ux.ManagedIframePanel.superclass.on.apply(this,arguments);},setSrc:function(url,discardUrl,callback){url=url||this.defaultSrc||false;if(!url)return this;if(url.url){callback=url.callback||false;discardUrl=url.discardUrl||false;url=url.url||false;}
var src=url||(Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:'');if(this.rendered&&this.iframe){this.iframe.setSrc(src,discardUrl,callback);}
return this;},getState:function(){var URI=this.iframe?this.iframe.getDocumentURI()||null:null;return Ext.apply(Ext.ux.ManagedIframePanel.superclass.getState.call(this)||{},URI?{defaultSrc:typeof URI=='function'?URI():URI}:null);},getUpdater:function(){return this.rendered?(this.iframe||this.body).getUpdater():null;},getFrame:function(){return this.rendered?this.iframe:null},getFrameWindow:function(){return this.rendered&&this.iframe?this.iframe.getWindow():null},getFrameDocument:function(){return this.rendered&&this.iframe?this.iframe.getDocument():null},getFrameDoc:function(){return this.rendered&&this.iframe?this.iframe.getDoc():null},getFrameBody:function(){return this.rendered&&this.iframe?this.iframe.getBody():null},load:function(loadCfg){var um;if(um=this.getUpdater()){if(loadCfg&&loadCfg.renderer){um.setRenderer(loadCfg.renderer);delete loadCfg.renderer;}
um.update.apply(um,arguments);}
return this;},doAutoLoad:function(){this.load(typeof this.autoLoad=='object'?this.autoLoad:{url:this.autoLoad});}});Ext.reg('iframepanel',Ext.ux.ManagedIframePanel);Ext.ux.ManagedIframePortlet=Ext.extend(Ext.ux.ManagedIframePanel,{anchor:'100%',frame:true,collapseEl:'bwrap',collapsible:true,draggable:true,cls:'x-portlet'});Ext.reg('iframeportlet',Ext.ux.ManagedIframePortlet);Ext.apply(Ext.Element.prototype,{setVisible:function(visible,animate){if(!animate||!Ext.lib.Anim){if(this.visibilityMode==Ext.Element.DISPLAY){this.setDisplayed(visible);}else if(this.visibilityMode==Ext.Element.VISIBILITY){this.fixDisplay();this.dom.style.visibility=visible?"visible":"hidden";}else{this[visible?'removeClass':'addClass'](String(this.visibilityMode));}}else{var dom=this.dom;var visMode=this.visibilityMode;if(visible){this.setOpacity(.01);this.setVisible(true);}
this.anim({opacity:{to:(visible?1:0)}},this.preanim(arguments,1),null,.35,'easeIn',function(){if(!visible){if(visMode==Ext.Element.DISPLAY){dom.style.display="none";}else if(visMode==Ext.Element.VISIBILITY){dom.style.visibility="hidden";}else{Ext.get(dom).addClass(String(visMode));}
Ext.get(dom).setOpacity(1);}});}
return this;},isVisible:function(deep){var vis=!(this.getStyle("visibility")=="hidden"||this.getStyle("display")=="none"||this.hasClass(this.visibilityMode));if(deep!==true||!vis){return vis;}
var p=this.dom.parentNode;while(p&&p.tagName.toLowerCase()!="body"){if(!Ext.fly(p,'_isVisible').isVisible()){return false;}
p=p.parentNode;}
return true;}});Ext.onReady(function(){var CSS=Ext.util.CSS,rules=[];CSS.getRule('.x-managed-iframe')||(rules.push('.x-managed-iframe {height:100%;width:100%;overflow:auto;}'));CSS.getRule('.x-managed-iframe-mask')||(rules.push('.x-managed-iframe-mask{width:100%;height:100%;position:relative;}'));if(!CSS.getRule('.x-frame-shim')){rules.push('.x-frame-shim {z-index:9000;position:absolute;top:0px;left:0px;background:transparent!important;overflow:hidden;display:none;}');rules.push('.x-frame-shim-on{width:100%;height:100%;display:block;zoom:1;}');rules.push('.ext-ie6 .x-frame-shim{margin-left:5px;margin-top:3px;}');}
CSS.getRule('.x-hide-nosize')||(rules.push('.x-hide-nosize,.x-hide-nosize object,.x-hide-nosize iframe{height:0px!important;width:0px!important;border:none;}'));if(!!rules.length){CSS.createStyleSheet(rules.join(' '));}});})();Ext.namespace('Ext.ux.grid.livegrid');Ext.ux.grid.livegrid.DragZone=function(grid,config){Ext.ux.grid.livegrid.DragZone.superclass.constructor.call(this,grid,config);this.view.ds.on('beforeselectionsload',this._onBeforeSelectionsLoad,this);this.view.ds.on('selectionsload',this._onSelectionsLoad,this);};Ext.extend(Ext.ux.grid.livegrid.DragZone,Ext.grid.GridDragZone,{isDropValid:true,onInitDrag:function(e)
{this.view.ds.loadSelections(this.grid.selModel.getPendingSelections(true));Ext.ux.grid.livegrid.DragZone.superclass.onInitDrag.call(this,e);},_onBeforeSelectionsLoad:function()
{this.isDropValid=false;Ext.fly(this.proxy.el.dom.firstChild).addClass('ext-ux-livegrid-drop-waiting');},_onSelectionsLoad:function()
{this.isDropValid=true;this.ddel.innerHTML=this.grid.getDragDropText();Ext.fly(this.proxy.el.dom.firstChild).removeClass('ext-ux-livegrid-drop-waiting');}});Ext.namespace('Ext.ux.grid.livegrid');Ext.ux.grid.livegrid.EditorGridPanel=Ext.extend(Ext.grid.EditorGridPanel,{initEvents:function()
{Ext.ux.grid.livegrid.EditorGridPanel.superclass.initEvents.call(this);this.view.on("cursormove",this.stopEditing,this,[true]);},startEditing:function(row,col)
{this.stopEditing();if(this.colModel.isCellEditable(col,row)){this.view.ensureVisible(row,col,true);if(!this.store.getAt(row)){return;}}
return Ext.ux.grid.livegrid.EditorGridPanel.superclass.startEditing.call(this,row,col);},walkCells:function(row,col,step,fn,scope)
{return Ext.ux.grid.livegrid.GridPanel.prototype.walkCells.call(this,row,col,step,fn,scope);}});Ext.namespace('Ext.ux.grid.livegrid');Ext.ux.grid.livegrid.GridPanel=Ext.extend(Ext.grid.GridPanel,{walkCells:function(row,col,step,fn,scope)
{var ds=this.store;var _oF=ds.getCount;ds.getCount=ds.getTotalCount;var ret=Ext.ux.grid.livegrid.GridPanel.superclass.walkCells.call(this,row,col,step,fn,scope);ds.getCount=_oF;return ret;}});Ext.namespace('Ext.ux.grid.livegrid');Ext.ux.grid.livegrid.GridView=function(config){this.addEvents({'beforebuffer':true,'buffer':true,'bufferfailure':true,'cursormove':true});this.horizontalScrollOffset=17;this.loadMask=false;Ext.apply(this,config);this.templates={};this.templates.master=new Ext.Template('<div class="x-grid3" hidefocus="true"><div class="ext-ux-livegrid-liveScroller"><div></div></div>','<div class="x-grid3-viewport"">','<div class="x-grid3-header"><div class="x-grid3-header-inner"><div class="x-grid3-header-offset">{header}</div></div><div class="x-clear"></div></div>','<div class="x-grid3-scroller" style="overflow-y:hidden !important;"><div class="x-grid3-body">{body}</div><a href="#" class="x-grid3-focus" tabIndex="-1"></a></div>',"</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>");Ext.ux.grid.livegrid.GridView.superclass.constructor.call(this);};Ext.extend(Ext.ux.grid.livegrid.GridView,Ext.grid.GridView,{_maskIndex:20001,hdHeight:0,rowClipped:0,liveScroller:null,liveScrollerInset:null,rowHeight:-1,visibleRows:1,lastIndex:-1,lastRowIndex:0,lastScrollPos:0,rowIndex:0,isBuffering:false,requestQueue:-1,loadMask:null,isPrebuffering:false,reset:function(forceReload)
{if(forceReload===false){this.ds.modified=[];this.grid.selModel.clearSelections(true);this.rowIndex=0;this.lastScrollPos=0;this.lastRowIndex=0;this.lastIndex=0;this.adjustVisibleRows();this.adjustScrollerPos(-this.liveScroller.dom.scrollTop,true);this.showLoadMask(false);this.refresh(true);this.fireEvent('cursormove',this,0,Math.min(this.ds.totalLength,this.visibleRows-this.rowClipped),this.ds.totalLength);return false;}else{var params={};var sInfo=this.ds.sortInfo;if(sInfo){params={dir:sInfo.direction,sort:sInfo.field};}
return this.ds.load({params:params});}},renderUI:function()
{var g=this.grid;var dEnabled=g.enableDragDrop||g.enableDrag;g.enableDragDrop=false;g.enableDrag=false;Ext.ux.grid.livegrid.GridView.superclass.renderUI.call(this);var g=this.grid;g.enableDragDrop=dEnabled;g.enableDrag=dEnabled;if(dEnabled){var dd=new Ext.ux.grid.livegrid.DragZone(g,{ddGroup:g.ddGroup||'GridDD'});}
if(this.loadMask){this.loadMask=new Ext.LoadMask(this.mainBody.dom.parentNode.parentNode,this.loadMask);}},init:function(grid)
{Ext.ux.grid.livegrid.GridView.superclass.init.call(this,grid);grid.on('expand',this._onExpand,this);},initData:function(ds,cm)
{if(this.ds){this.ds.un('bulkremove',this.onBulkRemove,this);this.ds.un('beforeload',this.onBeforeLoad,this);}
if(ds){ds.on('bulkremove',this.onBulkRemove,this);ds.on('beforeload',this.onBeforeLoad,this);}
Ext.ux.grid.livegrid.GridView.superclass.initData.call(this,ds,cm);},renderBody:function()
{var markup=this.renderRows(0,this.visibleRows-1);return this.templates.body.apply({rows:markup});},initElements:function()
{var E=Ext.Element;var el=this.grid.getGridEl().dom.firstChild;var cs=el.childNodes;this.el=new E(el);this.mainWrap=new E(cs[1]);this.liveScroller=new E(cs[0]);this.liveScroller.setStyle('zIndex',2);this.liveScrollerInset=this.liveScroller.dom.firstChild;this.liveScroller.on('scroll',this.onLiveScroll,this,{buffer:this.scrollDelay});var thd=this.mainWrap.dom.firstChild;this.mainHd=new E(thd);this.hdHeight=thd.offsetHeight;this.innerHd=this.mainHd.dom.firstChild;this.scroller=new E(this.mainWrap.dom.childNodes[1]);if(this.forceFit){this.scroller.setStyle('overflow-x','hidden');}
this.mainBody=new E(this.scroller.dom.firstChild);this.mainBody.on('mousewheel',this.handleWheel,this);this.focusEl=new E(this.scroller.dom.childNodes[1]);this.focusEl.swallowEvent("click",true);this.resizeMarker=new E(cs[2]);this.resizeProxy=new E(cs[3]);},layout:function()
{if(!this.mainBody){return;}
var g=this.grid;var c=g.getGridEl(),cm=this.cm,expandCol=g.autoExpandColumn,gv=this;var csize=c.getSize(true);var vw=csize.width;if(vw<20||csize.height<20){return;}
if(g.autoHeight){this.scroller.dom.style.overflow='visible';}else{this.el.setSize(csize.width,csize.height);var hdHeight=this.mainHd.getHeight();var vh=csize.height-(hdHeight);this.scroller.setSize(vw,vh);if(this.innerHd){this.innerHd.style.width=(vw)+'px';}}
this.liveScroller.dom.style.top=this.hdHeight+"px";if(this.forceFit){if(this.lastViewWidth!=vw){this.fitColumns(false,false);this.lastViewWidth=vw;}}else{this.autoExpand();}
this.adjustVisibleRows();this.adjustBufferInset();this.onLayout(vw,vh);},removeRow:function(row)
{Ext.removeNode(this.getRow(row));},removeRows:function(firstRow,lastRow)
{var bd=this.mainBody.dom;for(var rowIndex=firstRow;rowIndex<=lastRow;rowIndex++){Ext.removeNode(bd.childNodes[firstRow]);}},_onExpand:function(panel)
{this.adjustVisibleRows();this.adjustBufferInset();this.adjustScrollerPos(this.rowHeight*this.rowIndex,true);},onColumnMove:function(cm,oldIndex,newIndex)
{this.indexMap=null;this.replaceLiveRows(this.rowIndex,true);this.updateHeaders();this.updateHeaderSortState();this.afterMove(newIndex);},onColumnWidthUpdated:function(col,w,tw)
{this.adjustVisibleRows();this.adjustBufferInset();},onAllColumnWidthsUpdated:function(ws,tw)
{this.adjustVisibleRows();this.adjustBufferInset();},onRowSelect:function(row)
{if(row<this.rowIndex||row>this.rowIndex+this.visibleRows){return;}
this.addRowClass(row,"x-grid3-row-selected");},onRowDeselect:function(row)
{if(row<this.rowIndex||row>this.rowIndex+this.visibleRows){return;}
this.removeRowClass(row,"x-grid3-row-selected");},onClear:function()
{this.reset(false);},onBulkRemove:function(store,removedData)
{var record=null;var index=0;var viewIndex=0;var len=removedData.length;var removedInView=false;var removedAfterView=false;var scrollerAdjust=0;if(len==0){return;}
var tmpRowIndex=this.rowIndex;var removedBefore=0;var removedAfter=0;var removedIn=0;for(var i=0;i<len;i++){record=removedData[i][0];index=removedData[i][1];viewIndex=(index!=Number.MIN_VALUE&&index!=Number.MAX_VALUE)?index+this.ds.bufferRange[0]:index;if(viewIndex<this.rowIndex){removedBefore++;}else if(viewIndex>=this.rowIndex&&viewIndex<=this.rowIndex+(this.visibleRows-1)){removedIn++;}else if(viewIndex>=this.rowIndex+this.visibleRows){removedAfter++;}
this.fireEvent("beforerowremoved",this,viewIndex,record);this.fireEvent("rowremoved",this,viewIndex,record);}
var totalLength=this.ds.totalLength;this.rowIndex=Math.max(0,Math.min(this.rowIndex-removedBefore,totalLength-(this.visibleRows-1)));this.lastRowIndex=this.rowIndex;this.adjustScrollerPos(-(removedBefore*this.rowHeight),true);this.updateLiveRows(this.rowIndex,true);this.adjustBufferInset();this.processRows(0,undefined,false);},onRemove:function(ds,record,index)
{this.onBulkRemove(ds,[[record,index]]);},onAdd:function(ds,records,index)
{var recordLen=records.length;if(index==Number.MAX_VALUE||index==Number.MIN_VALUE){this.fireEvent("beforerowsinserted",this,index,index);if(index==Number.MIN_VALUE){this.rowIndex=this.rowIndex+recordLen;this.lastRowIndex=this.rowIndex;this.adjustBufferInset();this.adjustScrollerPos(this.rowHeight*recordLen,true);this.fireEvent("rowsinserted",this,index,index,recordLen);this.processRows(0,undefined,false);this.fireEvent('cursormove',this,this.rowIndex,Math.min(this.ds.totalLength,this.visibleRows-this.rowClipped),this.ds.totalLength);return;}
this.adjustBufferInset();this.fireEvent("rowsinserted",this,index,index,recordLen);return;}
var start=index+this.ds.bufferRange[0];var end=start+(recordLen-1);var len=this.getRows().length;var firstRow=0;var lastRow=0;if(start>this.rowIndex+(this.visibleRows-1)){this.fireEvent("beforerowsinserted",this,start,end);this.fireEvent("rowsinserted",this,start,end,recordLen);this.adjustVisibleRows();this.adjustBufferInset();}
else if(start>=this.rowIndex&&start<=this.rowIndex+(this.visibleRows-1)){firstRow=index;lastRow=index+(recordLen-1);this.lastRowIndex=this.rowIndex;this.rowIndex=(start>this.rowIndex)?this.rowIndex:start;this.insertRows(ds,firstRow,lastRow);if(this.lastRowIndex!=this.rowIndex){this.fireEvent('cursormove',this,this.rowIndex,Math.min(this.ds.totalLength,this.visibleRows-this.rowClipped),this.ds.totalLength);}
this.adjustVisibleRows();this.adjustBufferInset();}
else if(start<this.rowIndex){this.fireEvent("beforerowsinserted",this,start,end);this.rowIndex=this.rowIndex+recordLen;this.lastRowIndex=this.rowIndex;this.adjustVisibleRows();this.adjustBufferInset();this.adjustScrollerPos(this.rowHeight*recordLen,true);this.fireEvent("rowsinserted",this,start,end,recordLen);this.processRows(0,undefined,true);this.fireEvent('cursormove',this,this.rowIndex,Math.min(this.ds.totalLength,this.visibleRows-this.rowClipped),this.ds.totalLength);}},onBeforeLoad:function(store,options)
{options.params=options.params||{};var apply=Ext.apply;apply(options,{scope:this,callback:function(){this.reset(false);}});apply(options.params,{start:0,limit:this.ds.bufferSize});return true;},onLoad:function(o1,o2,options)
{this.adjustBufferInset();},onDataChange:function(store)
{this.updateHeaderSortState();},liveBufferUpdate:function(records,options,success)
{if(success===true){this.fireEvent('buffer',this,this.ds,this.rowIndex,Math.min(this.ds.totalLength,this.visibleRows-this.rowClipped),this.ds.totalLength,options);this.isBuffering=false;this.isPrebuffering=false;this.showLoadMask(false);this.grid.selModel.replaceSelections(records);if(this.isInRange(this.rowIndex)){this.replaceLiveRows(this.rowIndex,options.forceRepaint);}else{this.updateLiveRows(this.rowIndex);}
if(this.requestQueue>=0){var offset=this.requestQueue;this.requestQueue=-1;this.updateLiveRows(offset);}
return;}else{this.fireEvent('bufferfailure',this,this.ds,options);}
this.requestQueue=-1;this.isBuffering=false;this.isPrebuffering=false;this.showLoadMask(false);},handleWheel:function(e)
{if(this.rowHeight==-1){e.stopEvent();return;}
var d=e.getWheelDelta();this.adjustScrollerPos(-(d*this.rowHeight));e.stopEvent();},onLiveScroll:function()
{var scrollTop=this.liveScroller.dom.scrollTop;var cursor=Math.floor((scrollTop)/this.rowHeight);this.rowIndex=cursor;if(cursor==this.lastRowIndex){return;}
this.updateLiveRows(cursor);this.lastScrollPos=this.liveScroller.dom.scrollTop;},refreshRow:function(record)
{var ds=this.ds,index;if(typeof record=='number'){index=record;record=ds.getAt(index);}else{index=ds.indexOf(record);}
var viewIndex=index+this.ds.bufferRange[0];if(viewIndex<this.rowIndex||viewIndex>=this.rowIndex+this.visibleRows){this.fireEvent("rowupdated",this,viewIndex,record);return;}
this.insertRows(ds,index,index,true);this.fireEvent("rowupdated",this,viewIndex,record);},processRows:function(startRow,skipStripe,paintSelections)
{skipStripe=skipStripe||!this.grid.stripeRows;startRow=0;var rows=this.getRows();var cls=' x-grid3-row-alt ';var cursor=this.rowIndex;var index=0;var selections=this.grid.selModel.selections;var ds=this.ds;var row=null;for(var i=startRow,len=rows.length;i<len;i++){index=i+cursor;row=rows[i];row.rowIndex=index;if(paintSelections!==false){if(this.grid.selModel.isSelected(this.ds.getAt(index))===true){this.addRowClass(index,"x-grid3-row-selected");}else{this.removeRowClass(index,"x-grid3-row-selected");}
this.fly(row).removeClass("x-grid3-row-over");}
if(!skipStripe){var isAlt=((index+1)%2==0);var hasAlt=(' '+row.className+' ').indexOf(cls)!=-1;if(isAlt==hasAlt){continue;}
if(isAlt){row.className+=" x-grid3-row-alt";}else{row.className=row.className.replace("x-grid3-row-alt","");}}}},insertRows:function(dm,firstRow,lastRow,isUpdate)
{var viewIndexFirst=firstRow+this.ds.bufferRange[0];var viewIndexLast=lastRow+this.ds.bufferRange[0];if(!isUpdate){this.fireEvent("beforerowsinserted",this,viewIndexFirst,viewIndexLast);}
if(isUpdate!==true&&(this.getRows().length+(lastRow-firstRow))>=this.visibleRows){this.removeRows((this.visibleRows-1)-(lastRow-firstRow),this.visibleRows-1);}else if(isUpdate){this.removeRows(viewIndexFirst-this.rowIndex,viewIndexLast-this.rowIndex);}
var lastRenderRow=(firstRow==lastRow)?lastRow:Math.min(lastRow,(this.rowIndex-this.ds.bufferRange[0])+(this.visibleRows-1));var html=this.renderRows(firstRow,lastRenderRow);var before=this.getRow(viewIndexFirst);if(before){Ext.DomHelper.insertHtml('beforeBegin',before,html);}else{Ext.DomHelper.insertHtml('beforeEnd',this.mainBody.dom,html);}
if(isUpdate===true){var rows=this.getRows();var cursor=this.rowIndex;for(var i=0,max_i=rows.length;i<max_i;i++){rows[i].rowIndex=cursor+i;}}
if(!isUpdate){this.fireEvent("rowsinserted",this,viewIndexFirst,viewIndexLast,(viewIndexLast-viewIndexFirst)+1);this.processRows(0,undefined,true);}},getRow:function(row)
{if(row-this.rowIndex<0){return null;}
return this.getRows()[row-this.rowIndex];},getCell:function(row,col)
{var row=this.getRow(row);return row?row.getElementsByTagName('td')[col]:null;},focusCell:function(row,col,hscroll)
{var xy=this.ensureVisible(row,col,hscroll);if(!xy){return;}
this.focusEl.setXY(xy);if(Ext.isGecko){this.focusEl.focus();}else{this.focusEl.focus.defer(1,this.focusEl);}},ensureVisible:function(row,col,hscroll)
{if(typeof row!="number"){row=row.rowIndex;}
if(row<0||row>=this.ds.totalLength){return;}
col=(col!==undefined?col:0);var rowInd=row-this.rowIndex;if(this.rowClipped&&row==this.rowIndex+this.visibleRows-1){this.adjustScrollerPos(this.rowHeight);}else if(row>=this.rowIndex+this.visibleRows){this.adjustScrollerPos(((row-(this.rowIndex+this.visibleRows))+1)*this.rowHeight);}else if(row<=this.rowIndex){this.adjustScrollerPos((rowInd)*this.rowHeight);}
var rowEl=this.getRow(row),cellEl;if(!rowEl){return;}
if(!(hscroll===false&&col===0)){while(this.cm.isHidden(col)){col++;}
cellEl=this.getCell(row,col);}
var c=this.scroller.dom;if(hscroll!==false){var cleft=parseInt(cellEl.offsetLeft,10);var cright=cleft+cellEl.offsetWidth;var sleft=parseInt(c.scrollLeft,10);var sright=sleft+c.clientWidth;if(cleft<sleft){c.scrollLeft=cleft;}else if(cright>sright){c.scrollLeft=cright-c.clientWidth;}}
return cellEl?Ext.fly(cellEl).getXY():[c.scrollLeft+this.el.getX(),Ext.fly(rowEl).getY()];},isRecordRendered:function(record)
{var ind=this.ds.indexOf(record);if(ind>=this.rowIndex&&ind<this.rowIndex+this.visibleRows){return true;}
return false;},isInRange:function(rowIndex)
{var lastRowIndex=Math.min(this.ds.totalLength-1,rowIndex+this.visibleRows);return(rowIndex>=this.ds.bufferRange[0])&&(lastRowIndex<=this.ds.bufferRange[1]);},getPredictedBufferIndex:function(index,inRange,down)
{if(!inRange){var dNear=2*this.nearLimit;return Math.max(0,index-((dNear>=this.ds.bufferSize?this.nearLimit:dNear)));}
if(!down){return Math.max(0,(index-this.ds.bufferSize)+this.visibleRows);}
if(down){return Math.max(0,Math.min(index,this.ds.totalLength-this.ds.bufferSize));}},updateLiveRows:function(index,forceRepaint,forceReload)
{var inRange=this.isInRange(index);if(this.isBuffering){if(this.isPrebuffering){if(inRange){this.replaceLiveRows(index);}else{this.showLoadMask(true);}}
this.fireEvent('cursormove',this,index,Math.min(this.ds.totalLength,this.visibleRows-this.rowClipped),this.ds.totalLength);this.requestQueue=index;return;}
var lastIndex=this.lastIndex;this.lastIndex=index;var inRange=this.isInRange(index);var down=false;if(inRange&&forceReload!==true){this.replaceLiveRows(index,forceRepaint);this.fireEvent('cursormove',this,index,Math.min(this.ds.totalLength,this.visibleRows-this.rowClipped),this.ds.totalLength);if(index>lastIndex){down=true;var totalCount=this.ds.totalLength;if(index+this.visibleRows+this.nearLimit<=this.ds.bufferRange[1]){return;}
if(this.ds.bufferRange[1]+1>=totalCount){return;}}else if(index<lastIndex){down=false;if(this.ds.bufferRange[0]<=0){return;}
if(index-this.nearLimit>this.ds.bufferRange[0]){return;}}else{return;}
this.isPrebuffering=true;}
this.isBuffering=true;var bufferOffset=this.getPredictedBufferIndex(index,inRange,down);if(!inRange){this.showLoadMask(true);}
this.ds.suspendEvents();var sInfo=this.ds.sortInfo;var params={};if(this.ds.lastOptions){Ext.apply(params,this.ds.lastOptions.params);}
params.start=bufferOffset;params.limit=this.ds.bufferSize;if(sInfo){params.dir=sInfo.direction;params.sort=sInfo.field;}
var opts={forceRepaint:forceRepaint,callback:this.liveBufferUpdate,scope:this,params:params};this.fireEvent('beforebuffer',this,this.ds,index,Math.min(this.ds.totalLength,this.visibleRows-this.rowClipped),this.ds.totalLength,opts);this.ds.load(opts);this.ds.resumeEvents();},showLoadMask:function(show)
{if(this.loadMask==null){if(show){this.loadMask=new Ext.LoadMask(this.mainBody.dom.parentNode.parentNode,this.loadMaskConfig);}else{return;}}
if(show){this.loadMask.show();this.liveScroller.setStyle('zIndex',this._maskIndex);}else{this.loadMask.hide();this.liveScroller.setStyle('zIndex',2);}},replaceLiveRows:function(cursor,forceReplace,processRows)
{var spill=cursor-this.lastRowIndex;if(spill==0&&forceReplace!==true){return;}
var append=spill>0;spill=Math.abs(spill);var bufferRange=this.ds.bufferRange;var cursorBuffer=cursor-bufferRange[0];var lpIndex=Math.min(cursorBuffer+this.visibleRows-1,bufferRange[1]-bufferRange[0]);if(spill>=this.visibleRows||spill==0){this.mainBody.update(this.renderRows(cursorBuffer,lpIndex));}else{if(append){this.removeRows(0,spill-1);if(cursorBuffer+this.visibleRows-spill<=bufferRange[1]-bufferRange[0]){var html=this.renderRows(cursorBuffer+this.visibleRows-spill,lpIndex);Ext.DomHelper.insertHtml('beforeEnd',this.mainBody.dom,html);}}else{this.removeRows(this.visibleRows-spill,this.visibleRows-1);var html=this.renderRows(cursorBuffer,cursorBuffer+spill-1);Ext.DomHelper.insertHtml('beforeBegin',this.mainBody.dom.firstChild,html);}}
if(processRows!==false){this.processRows(0,undefined,true);}
this.lastRowIndex=cursor;},adjustBufferInset:function()
{var liveScrollerDom=this.liveScroller.dom;var g=this.grid,ds=g.store;var c=g.getGridEl();var elWidth=c.getSize().width;var hiddenRows=(ds.totalLength==this.visibleRows-this.rowClipped)?0:Math.max(0,ds.totalLength-(this.visibleRows-this.rowClipped));if(hiddenRows==0){this.scroller.setWidth(elWidth);liveScrollerDom.style.display='none';return;}else{this.scroller.setWidth(elWidth-this.scrollOffset);liveScrollerDom.style.display='';}
var scrollbar=this.cm.getTotalWidth()+this.scrollOffset>elWidth;var contHeight=liveScrollerDom.parentNode.offsetHeight+
((ds.totalLength>0&&scrollbar)?-this.horizontalScrollOffset:0)
-this.hdHeight;liveScrollerDom.style.height=Math.max(contHeight,this.horizontalScrollOffset*2)+"px";if(this.rowHeight==-1){return;}
this.liveScrollerInset.style.height=(hiddenRows==0?0:contHeight+(hiddenRows*this.rowHeight))+"px";},adjustVisibleRows:function()
{if(this.rowHeight==-1){if(this.getRows()[0]){this.rowHeight=this.getRows()[0].offsetHeight;if(this.rowHeight<=0){this.rowHeight=-1;return;}}else{return;}}
var g=this.grid,ds=g.store;var c=g.getGridEl();var cm=this.cm;var size=c.getSize();var width=size.width;var vh=size.height;var vw=width-this.scrollOffset;if(cm.getTotalWidth()>vw){vh-=this.horizontalScrollOffset;}
vh-=this.mainHd.getHeight();var totalLength=ds.totalLength||0;var visibleRows=Math.max(1,Math.floor(vh/this.rowHeight));this.rowClipped=0;if(totalLength>visibleRows&&this.rowHeight/3<(vh-(visibleRows*this.rowHeight))){visibleRows=Math.min(visibleRows+1,totalLength);this.rowClipped=1;}
if(this.visibleRows==visibleRows){return;}
this.visibleRows=visibleRows;if(this.isBuffering){return;}
if(this.rowIndex+(visibleRows-this.rowClipped)>totalLength){this.rowIndex=Math.max(0,totalLength-(visibleRows-this.rowClipped));this.lastRowIndex=this.rowIndex;}
this.updateLiveRows(this.rowIndex,true);},adjustScrollerPos:function(pixels,suspendEvent)
{if(pixels==0){return;}
var liveScroller=this.liveScroller;var scrollDom=liveScroller.dom;if(suspendEvent===true){liveScroller.un('scroll',this.onLiveScroll,this);}
this.lastScrollPos=scrollDom.scrollTop;scrollDom.scrollTop+=pixels;if(suspendEvent===true){scrollDom.scrollTop=scrollDom.scrollTop;liveScroller.on('scroll',this.onLiveScroll,this,{buffer:this.scrollDelay});}}});Ext.namespace('Ext.ux.grid.livegrid');Ext.ux.grid.livegrid.JsonReader=function(meta,recordType){Ext.ux.grid.livegrid.JsonReader.superclass.constructor.call(this,meta,recordType);};Ext.extend(Ext.ux.grid.livegrid.JsonReader,Ext.data.JsonReader,{readRecords:function(o)
{var s=this.meta;if(!this.ef&&s.versionProperty){this.getVersion=this.getJsonAccessor(s.versionProperty);}
if(!this.__readRecords){this.__readRecords=Ext.ux.grid.livegrid.JsonReader.superclass.readRecords;}
var intercept=this.__readRecords.call(this,o);if(s.versionProperty){var v=this.getVersion(o);intercept.version=(v===undefined||v==="")?null:v;}
return intercept;}});Ext.namespace('Ext.ux.grid.livegrid');Ext.ux.grid.livegrid.RowSelectionModel=function(config){this.addEvents({'selectiondirty':true});Ext.apply(this,config);this.pendingSelections={};Ext.ux.grid.livegrid.RowSelectionModel.superclass.constructor.call(this);};Ext.extend(Ext.ux.grid.livegrid.RowSelectionModel,Ext.grid.RowSelectionModel,{initEvents:function()
{Ext.ux.grid.livegrid.RowSelectionModel.superclass.initEvents.call(this);this.grid.view.on('rowsinserted',this.onAdd,this);this.grid.store.on('selectionsload',this.onSelectionsLoad,this);},onRefresh:function()
{this.clearSelections(true);},onRemove:function(v,index,r)
{var ranges=this.getPendingSelections();var rangesLength=ranges.length;var selectionChanged=false;if(index==Number.MIN_VALUE||index==Number.MAX_VALUE){if(r){if(this.isIdSelected(r.id)&&index==Number.MIN_VALUE){this.shiftSelections(this.grid.store.bufferRange[1],-1);}
this.selections.remove(r);selectionChanged=true;}
if(index==Number.MIN_VALUE){this.clearPendingSelections(0,this.grid.store.bufferRange[0]);}else{this.clearPendingSelections(this.grid.store.bufferRange[1]);}
if(rangesLength!=0){this.fireEvent('selectiondirty',this,index,1);}}else{selectionChanged=this.isIdSelected(r.id);if(!selectionChanged){return;}
this.selections.remove(r);if(rangesLength!=0){var startRange=ranges[0];var endRange=ranges[rangesLength-1];if(index<=endRange||index<=startRange){this.shiftSelections(index,-1);this.fireEvent('selectiondirty',this,index,1);}}}
if(selectionChanged){this.fireEvent('selectionchange',this);}},onAdd:function(store,index,endIndex,recordLength)
{var ranges=this.getPendingSelections();var rangesLength=ranges.length;if((index==Number.MIN_VALUE||index==Number.MAX_VALUE)){if(index==Number.MIN_VALUE){this.clearPendingSelections(0,this.grid.store.bufferRange[0]);this.shiftSelections(this.grid.store.bufferRange[1],recordLength);}else{this.clearPendingSelections(this.grid.store.bufferRange[1]);}
if(rangesLength!=0){this.fireEvent('selectiondirty',this,index,r);}
return;}
var startRange=ranges[0];var endRange=ranges[rangesLength-1];var viewIndex=index;if(viewIndex<=endRange||viewIndex<=startRange){this.fireEvent('selectiondirty',this,viewIndex,recordLength);this.shiftSelections(viewIndex,recordLength);}},shiftSelections:function(startRow,length)
{var index=0;var newIndex=0;var newRequests={};var ds=this.grid.store;var storeIndex=startRow-ds.bufferRange[0];var newStoreIndex=0;var totalLength=this.grid.store.totalLength;var rec=null;var ranges=this.getPendingSelections();var rangesLength=ranges.length;if(rangesLength==0){return;}
for(var i=0;i<rangesLength;i++){index=ranges[i];if(index<startRow){continue;}
newIndex=index+length;newStoreIndex=storeIndex+length;if(newIndex>=totalLength){break;}
rec=ds.getAt(newStoreIndex);if(rec){this.selections.add(rec);}else{newRequests[newIndex]=true;}}
this.pendingSelections=newRequests;},onSelectionsLoad:function(store,records,ranges)
{this.replaceSelections(records);},hasNext:function()
{return this.last!==false&&(this.last+1)<this.grid.store.getTotalCount();},getCount:function()
{return this.selections.length+this.getPendingSelections().length;},isSelected:function(index)
{if(typeof index=="number"){var orgInd=index;index=this.grid.store.getAt(orgInd);if(!index){var ind=this.getPendingSelections().indexOf(orgInd);if(ind!=-1){return true;}
return false;}}
var r=index;return(r&&this.selections.key(r.id)?true:false);},deselectRecord:function(record,preventViewNotify)
{if(this.locked){return;}
var isSelected=this.selections.key(record.id);if(!isSelected){return;}
var store=this.grid.store;var index=store.indexOfId(record.id);if(index==-1){index=store.findInsertIndex(record);if(index!=Number.MIN_VALUE&&index!=Number.MAX_VALUE){index+=store.bufferRange[0];}}else{delete this.pendingSelections[index];}
if(this.last==index){this.last=false;}
if(this.lastActive==index){this.lastActive=false;}
this.selections.remove(record);if(!preventViewNotify){this.grid.getView().onRowDeselect(index);}
this.fireEvent("rowdeselect",this,index,record);this.fireEvent("selectionchange",this);},deselectRow:function(index,preventViewNotify)
{if(this.locked)return;if(this.last==index){this.last=false;}
if(this.lastActive==index){this.lastActive=false;}
var r=this.grid.store.getAt(index);delete this.pendingSelections[index];if(r){this.selections.remove(r);}
if(!preventViewNotify){this.grid.getView().onRowDeselect(index);}
this.fireEvent("rowdeselect",this,index,r);this.fireEvent("selectionchange",this);},selectRow:function(index,keepExisting,preventViewNotify)
{if(this.locked||index<0||index>=this.grid.store.getTotalCount()){return;}
var r=this.grid.store.getAt(index);if(this.fireEvent("beforerowselect",this,index,keepExisting,r)!==false){if(!keepExisting||this.singleSelect){this.clearSelections();}
if(r){this.selections.add(r);delete this.pendingSelections[index];}else{this.pendingSelections[index]=true;}
this.last=this.lastActive=index;if(!preventViewNotify){this.grid.getView().onRowSelect(index);}
this.fireEvent("rowselect",this,index,r);this.fireEvent("selectionchange",this);}},clearPendingSelections:function(startIndex,endIndex)
{if(endIndex==undefined){endIndex=Number.MAX_VALUE;}
var newSelections={};var ranges=this.getPendingSelections();var rangesLength=ranges.length;var index=0;for(var i=0;i<rangesLength;i++){index=ranges[i];if(index<=endIndex&&index>=startIndex){continue;}
newSelections[index]=true;}
this.pendingSelections=newSelections;},replaceSelections:function(records)
{if(!records||records.length==0){return;}
var ds=this.grid.store;var rec=null;var assigned=[];var ranges=this.getPendingSelections();var rangesLength=ranges.length
var selections=this.selections;var index=0;for(var i=0;i<rangesLength;i++){index=ranges[i];rec=ds.getAt(index);if(rec){selections.add(rec);assigned.push(rec.id);delete this.pendingSelections[index];}}
var id=null;for(i=0,len=records.length;i<len;i++){rec=records[i];id=rec.id;if(assigned.indexOf(id)==-1&&selections.containsKey(id)){selections.add(rec);}}},getPendingSelections:function(asRange)
{var index=1;var ranges=[];var currentRange=0;var tmpArray=[];for(var i in this.pendingSelections){tmpArray.push(parseInt(i));}
tmpArray.sort(function(o1,o2){if(o1>o2){return 1;}else if(o1<o2){return-1;}else{return 0;}});if(!asRange){return tmpArray;}
var max_i=tmpArray.length;if(max_i==0){return[];}
ranges[currentRange]=[tmpArray[0],tmpArray[0]];for(var i=0,max_i=max_i-1;i<max_i;i++){if(tmpArray[i+1]-tmpArray[i]==1){ranges[currentRange][1]=tmpArray[i+1];}else{currentRange++;ranges[currentRange]=[tmpArray[i+1],tmpArray[i+1]];}}
return ranges;},clearSelections:function(fast)
{if(this.locked)return;if(fast!==true){var ds=this.grid.store;var s=this.selections;var ind=-1;s.each(function(r){ind=ds.indexOfId(r.id);if(ind!=-1){this.deselectRow(ind+ds.bufferRange[0]);}},this);s.clear();this.pendingSelections={};}else{this.selections.clear();this.pendingSelections={};}
this.last=false;},selectRange:function(startRow,endRow,keepExisting)
{if(this.locked){return;}
if(!keepExisting){this.clearSelections();}
if(startRow<=endRow){for(var i=startRow;i<=endRow;i++){this.selectRow(i,true);}}else{for(var i=startRow;i>=endRow;i--){this.selectRow(i,true);}}}});Ext.namespace('Ext.ux.grid.livegrid');Ext.ux.grid.livegrid.Store=function(config){config=config||{};config.remoteSort=true;this.addEvents('bulkremove','versionchange','beforeselectionsload','selectionsload');Ext.ux.grid.livegrid.Store.superclass.constructor.call(this,config);this.totalLength=0;this.bufferRange=[-1,-1];this.on('clear',function(){this.bufferRange=[-1,-1];},this);if(this.url&&!this.selectionsProxy){this.selectionsProxy=new Ext.data.HttpProxy({url:this.url});}};Ext.extend(Ext.ux.grid.livegrid.Store,Ext.data.Store,{version:null,insert:function(index,records)
{records=[].concat(records);index=index>=this.bufferSize?Number.MAX_VALUE:index;if(index==Number.MIN_VALUE||index==Number.MAX_VALUE){var l=records.length;if(index==Number.MIN_VALUE){this.bufferRange[0]+=l;this.bufferRange[1]+=l;}
this.totalLength+=l;this.fireEvent("add",this,records,index);return;}
var split=false;var insertRecords=records;if(records.length+index>=this.bufferSize){split=true;insertRecords=records.splice(0,this.bufferSize-index)}
this.totalLength+=insertRecords.length;if(this.bufferRange[0]<=-1){this.bufferRange[0]=0;}
if(this.bufferRange[1]<(this.bufferSize-1)){this.bufferRange[1]=Math.min(this.bufferRange[1]+insertRecords.length,this.bufferSize-1);}
for(var i=0,len=insertRecords.length;i<len;i++){this.data.insert(index,insertRecords[i]);insertRecords[i].join(this);}
while(this.getCount()>this.bufferSize){this.data.remove(this.data.last());}
this.fireEvent("add",this,insertRecords,index);if(split==true){this.fireEvent("add",this,records,Number.MAX_VALUE);}},remove:function(record,suspendEvent)
{var index=this._getIndex(record);if(index<0){this.totalLength-=1;if(this.pruneModifiedRecords){this.modified.remove(record);}
this.bufferRange[0]=Math.max(-1,this.bufferRange[0]-1);this.bufferRange[1]=Math.max(-1,this.bufferRange[1]-1);if(suspendEvent!==true){this.fireEvent("remove",this,record,index);}
return index;}
this.bufferRange[1]=Math.max(-1,this.bufferRange[1]-1);this.data.removeAt(index);if(this.pruneModifiedRecords){this.modified.remove(record);}
this.totalLength-=1;if(suspendEvent!==true){this.fireEvent("remove",this,record,index);}
return index;},_getIndex:function(record)
{var index=this.indexOfId(record.id);if(index<0){index=this.findInsertIndex(record);}
return index;},bulkRemove:function(records)
{var rec=null;var recs=[];var ind=0;var len=records.length;var orgIndexes=[];for(var i=0;i<len;i++){rec=records[i];orgIndexes[rec.id]=this._getIndex(rec);}
for(var i=0;i<len;i++){rec=records[i];this.remove(rec,true);recs.push([rec,orgIndexes[rec.id]]);}
this.fireEvent("bulkremove",this,recs);},removeAll:function()
{this.totalLength=0;this.bufferRange=[-1,-1];this.data.clear();if(this.pruneModifiedRecords){this.modified=[];}
this.fireEvent("clear",this);},loadRanges:function(ranges)
{var max_i=ranges.length;if(max_i>0&&!this.selectionsProxy.activeRequest&&this.fireEvent("beforeselectionsload",this,ranges)!==false){var lParams=this.lastOptions.params;var params={};params.ranges=Ext.encode(ranges);if(lParams){if(lParams.sort){params.sort=lParams.sort;}
if(lParams.dir){params.dir=lParams.dir;}}
var options={};for(var i in this.lastOptions){options.i=this.lastOptions.i;}
options.ranges=params.ranges;this.selectionsProxy.load(params,this.reader,this.selectionsLoaded,this,options);}},loadSelections:function(ranges)
{if(ranges.length==0){return;}
this.loadRanges(ranges);},selectionsLoaded:function(o,options,success)
{if(this.checkVersionChange(o,options,success)!==false){var r=o.records;for(var i=0,len=r.length;i<len;i++){r[i].join(this);}
this.fireEvent("selectionsload",this,o.records,Ext.decode(options.ranges));}else{this.fireEvent("selectionsload",this,[],Ext.decode(options.ranges));}},checkVersionChange:function(o,options,success)
{if(o&&success!==false){if(o.version!==undefined){var old=this.version;this.version=o.version;if(this.version!==old){return this.fireEvent('versionchange',this,old,this.version);}}}},findInsertIndex:function(record)
{this.remoteSort=false;var index=Ext.ux.grid.livegrid.Store.superclass.findInsertIndex.call(this,record);this.remoteSort=true;if(this.bufferRange[0]<=0&&index==0){return index;}else if(this.bufferRange[0]>0&&index==0){return Number.MIN_VALUE;}else if(index>=this.bufferSize){return Number.MAX_VALUE;}
return index;},sortData:function(f,direction)
{direction=direction||'ASC';var st=this.fields.get(f).sortType;var fn=function(r1,r2){var v1=st(r1.data[f]),v2=st(r2.data[f]);return v1>v2?1:(v1<v2?-1:0);};this.data.sort(direction,fn);},onMetaChange:function(meta,rtype,o)
{this.version=null;Ext.ux.grid.livegrid.Store.superclass.onMetaChange.call(this,meta,rtype,o);},loadRecords:function(o,options,success)
{this.checkVersionChange(o,options,success);if(!o){this.bufferRange=[-1,-1];}else{this.bufferRange=[options.params.start,Math.max(0,Math.min((options.params.start+options.params.limit)-1,o.totalRecords-1))];}
Ext.ux.grid.livegrid.Store.superclass.loadRecords.call(this,o,options,success);},getAt:function(index)
{if(this.bufferRange[0]==-1){return undefined;}
var modelIndex=index-this.bufferRange[0];return this.data.itemAt(modelIndex);},clearFilter:function(){},isFiltered:function(){},collect:function(){},createFilterFn:function(){},sum:function(){},filter:function(){},filterBy:function(){},query:function(){},queryBy:function(){},find:function(){},findBy:function(){}});Ext.namespace('Ext.ux.grid.livegrid');Ext.ux.grid.livegrid.Toolbar=Ext.extend(Ext.Toolbar,{displayMsg:'Displaying {0} - {1} of {2}',emptyMsg:'No data to display',refreshText:"Refresh",initComponent:function()
{Ext.ux.grid.livegrid.Toolbar.superclass.initComponent.call(this);if(this.grid){this.view=this.grid.getView();}
var me=this;this.view.init=this.view.init.createSequence(function(){me.bind(this);},this.view);},updateInfo:function(rowIndex,visibleRows,totalCount)
{if(this.displayEl){var msg=totalCount==0?this.emptyMsg:String.format(this.displayMsg,rowIndex+1,rowIndex+visibleRows,totalCount);this.displayEl.update(msg);}},unbind:function(view)
{var st;var vw;if(view instanceof Ext.grid.GridView){vw=view;}else{vw=view.getView();}
st=view.ds;st.un('loadexception',this.enableLoading,this);st.un('beforeload',this.disableLoading,this);st.un('load',this.enableLoading,this);vw.un('rowremoved',this.onRowRemoved,this);vw.un('rowsinserted',this.onRowsInserted,this);vw.un('beforebuffer',this.beforeBuffer,this);vw.un('cursormove',this.onCursorMove,this);vw.un('buffer',this.onBuffer,this);vw.un('bufferfailure',this.enableLoading,this);this.view=undefined;},bind:function(view)
{this.view=view;var st=view.ds;st.on('loadexception',this.enableLoading,this);st.on('beforeload',this.disableLoading,this);st.on('load',this.enableLoading,this);view.on('rowremoved',this.onRowRemoved,this);view.on('rowsinserted',this.onRowsInserted,this);view.on('beforebuffer',this.beforeBuffer,this);view.on('cursormove',this.onCursorMove,this);view.on('buffer',this.onBuffer,this);view.on('bufferfailure',this.enableLoading,this);},enableLoading:function()
{this.loading.setDisabled(false);},disableLoading:function()
{this.loading.setDisabled(true);},onCursorMove:function(view,rowIndex,visibleRows,totalCount)
{this.updateInfo(rowIndex,visibleRows,totalCount);},onRowsInserted:function(view,start,end)
{this.updateInfo(view.rowIndex,Math.min(view.ds.totalLength,view.visibleRows-view.rowClipped),view.ds.totalLength);},onRowRemoved:function(view,index,record)
{this.updateInfo(view.rowIndex,Math.min(view.ds.totalLength,view.visibleRows-view.rowClipped),view.ds.totalLength);},beforeBuffer:function(view,store,rowIndex,visibleRows,totalCount,options)
{this.loading.disable();this.updateInfo(rowIndex,visibleRows,totalCount);},onBuffer:function(view,store,rowIndex,visibleRows,totalCount)
{this.loading.enable();this.updateInfo(rowIndex,visibleRows,totalCount);},onClick:function(type)
{switch(type){case'refresh':if(this.view.reset(true)){this.loading.disable();}else{this.loading.enable();}
break;}},onRender:function(ct,position)
{Ext.PagingToolbar.superclass.onRender.call(this,ct,position);this.loading=this.addButton({tooltip:this.refreshText,iconCls:"x-tbar-loading",handler:this.onClick.createDelegate(this,["refresh"])});this.addSeparator();if(this.displayInfo){this.displayEl=Ext.fly(this.el.dom).createChild({cls:'x-paging-info'});}}});Ext.namespace('Rack.widget');(function(){var ns=Rack.widget;(function(){var supercon=Ext.menu.Menu;var superproto=supercon.prototype;var con=ns.LoadableMenu=Ext.extend(supercon,{load:function(url,params){var loader=new Ext.menu.Item({text:'Loading...'});this.addItem(loader);var failCallback=function(){this.remove(loader);this.add({text:'Failed to load menu items'});}.createDelegate(this);Ext.lib.Ajax.request((params)?'POST':'GET',url,{success:function(o){this.remove(loader);try{Ext.decode(o.responseText).menu.forEach(function(e,i,a){this.add(e);}.createDelegate(this));}catch(e){failCallback();}}.createDelegate(this),failure:failCallback},params);return this;}});})();Ext.reg('loadablemenu',ns.LoadableMenu);})();(function(){var ns=Rack.widget;(function(){var supercon=Ext.Container;var superproto=supercon.prototype;var con=ns.Column=Ext.extend(supercon,{constructor:function(config){supercon.call(this,Ext.apply({autoEl:'div',cls:config.baseCls},config));}});})();Ext.reg('column',ns.Column);})();Rack.widget.DataFieldPanel=Ext.extend(Ext.Panel,{basicRowTpl:new Ext.Template('<tr class="underline"><td class="title" {width}>{label}</td><td>{data}</td></tr>'),initComponent:function(){Ext.Panel.prototype.initComponent.call(this);this.cls='rack-dfp';this.basicRowTpl.compile();},onRender:function(){Ext.Panel.prototype.onRender.apply(this,arguments);this.draw();},redraw:function(){this.draw();},draw:function(){var output='<table width="100%">';var labelWidth=this.labelWidth;if(this.fields){Ext.each(this.fields,function(f){var label=f.label;var data=!(f.data)?null:(typeof(f.data)==='function')?f.data.call(f.scope):f.data;if(f.renderer){data=f.renderer.call(f.scope,data);}
if(f.rowRenderer){output+=f.rowRenderer.call(f.scope,label,data,labelWidth);}else{output+=this.basicRowTpl.apply({width:(labelWidth)?String.format('style="width:{0};"',labelWidth):'',label:(label)?label+':':'&nbsp;',data:data});}},this);}
output+='</table>';this.body.update(output);}});Ext.reg('datafield',Rack.widget.DataFieldPanel);(function(){var supercon=Ext.Panel;var superproto=supercon.prototype;var con=Rack.widget.DataFieldPanel2=Ext.extend(supercon,{constructor:function(config){config=config||{};supercon.call(this,Ext.apply({cls:'rack-dfp',defaults:{labelWidth:config.labelWidth||0.5},items:config.fields?config.fields.map(function(field){return Ext.applyIf(field,{xtype:field.viewType==='group'?'r-dfp-group-row':field.viewType==='list'?'r-dfp-list-row':'r-dfp-row'},this);}):null},config));}});})();Ext.reg('datafield2',Rack.widget.DataFieldPanel2);(function(){var supercon=Ext.Container;var superproto=supercon.prototype;var con=Rack.widget.DFPRow=Ext.extend(supercon,{constructor:function(config){var hidden=config.hidden||false;if(config.showif){hidden=!config.showif();}
if(config.hideif){hidden=config.hideif();}
supercon.call(this,{autoEl:'div',layout:'simple-column',monitorResize:true,cls:'rack-dfp-row '+(config.rowCls||''),style:config.rowStyle||null,hidden:hidden,items:[{xtype:'r-dfp-tfield',columnWidth:config.labelWidth,label:config.label},{xtype:'r-dfp-field',columnWidth:1-(config.labelWidth),data:config.data,view:config.view,buttons:config.buttons}]});}});})();Ext.reg('r-dfp-row',Rack.widget.DFPRow);(function(){var supercon=Ext.Container;var superproto=supercon.prototype;var con=Rack.widget.DFPListRow=Ext.extend(supercon,{constructor:function(config){this.config=config;this.data=config.data;supercon.call(this,{autoEl:'div',items:null,listeners:{render:this.onRendered,destroy:this.onDestroyed,scope:this}});},onRendered:function(){this.update();this.data.addListener(this.update,this);},onDestroyed:function(){this.data.removeListener(this.update,this);},update:function(){if(this.items){this.items.each(function(item){this.remove(item);},this);}
var items=this.data?this.data().getItems():[];Ext.each(items,function(item){this.add({xtype:'r-dfp-row',label:this.config.label,data:item,view:this.config.view,buttons:this.config.buttons,rowCls:this.config.rowCls,rowStyle:this.config.rowStyle});},this);this.doLayout();}});})();Ext.reg('r-dfp-list-row',Rack.widget.DFPListRow);(function(){var supercon=Ext.Container;var superproto=supercon.prototype;var con=Rack.widget.DFPGroupRow=Ext.extend(supercon,{constructor:function(config){this.config=config;this.data=config.data;this.dataContainer=new Ext.Container({autoEl:'div',monitorResize:true,columnWidth:1-config.labelWidth});supercon.call(this,{autoEl:'div',cls:'rack-dfp-row '+(config.rowCls||''),style:config.rowStyle||null,layout:'simple-column',monitorResize:true,items:[{xtype:'r-dfp-tfield',columnWidth:config.labelWidth,label:config.label},this.dataContainer],listeners:{render:this.onRendered,destroy:this.onDestroyed,scope:this}});},onRendered:function(){this.update();this.data.addListener(this.update,this);},onDestroyed:function(){this.data.removeListener(this.update,this);},update:function(){if(this.dataContainer.items){this.dataContainer.items.each(function(item){this.dataContainer.remove(item);},this);}
var items=this.data?this.data().getItems():[];Ext.each(items,function(item){this.dataContainer.add({xtype:'r-dfp-field',data:item,view:this.config.view,buttons:this.config.buttons});},this);this.dataContainer.doLayout();}});})();Ext.reg('r-dfp-group-row',Rack.widget.DFPGroupRow);(function(){var supercon=Ext.BoxComponent;var superproto=supercon.prototype;var con=Rack.widget.DFPTField=Ext.extend(supercon,{onRender:function(ct,position){this.el=ct.createChild({cls:'rack-dfp-tfield',html:this.label?String.format('{0}:',this.label):''});superproto.onRender.call(this,ct,position);}});})();Ext.reg('r-dfp-tfield',Rack.widget.DFPTField);(function(){var supercon=Ext.Container;var superproto=supercon.prototype;var con=Rack.widget.DFPField=Ext.extend(supercon,{constructor:function(config){this.viewCmp=null;if(config.view){this.viewCmp=new config.view(config.data);}else{this.viewCmp=new Rack.widget.Label({html:typeof config.data==='function'?config.data():config.data});}
supercon.call(this,Ext.apply({monitorResize:true,items:this.viewCmp},config));},onRender:function(ct,position){this.el=ct.createChild({cls:'rack-dfp-field'});this.bodyEl=this.el.createChild({cls:'body'});superproto.onRender.call(this,ct,position);if(this.buttons){this.buttonEl=this.el.insertFirst({tag:'span',cls:'btn-ct'});Ext.each(this.buttons,function(b,i,a){var h,t=this;var cfg={};Ext.apply(cfg,b);if(b.handler){h=b.handler;cfg.handler=function(){var data=typeof(t.data)==='function'?t.data():t.data;h.call(cfg.scope,data,t,t.viewCmp);};}
(new Ext.Button(cfg)).render(this.buttonEl);},this);}},getLayoutTarget:function(){return this.bodyEl;}});})();Ext.reg('r-dfp-field',Rack.widget.DFPField);Rack.widget.OrganizerLayout=function(config){this.id=Ext.id();this.stateId=(config)?config.stateId:null;this.cmpState=this.getState();this.cmpOrder=[];this.cmpLookup={};this.dragProxy=new Ext.dd.StatusProxy();Ext.layout.ContainerLayout.apply(this,arguments);};Ext.extend(Rack.widget.OrganizerLayout,Ext.layout.ContainerLayout,{autoWidth:true,titleCollapse:false,hideCollapseTool:false,collapseFirst:false,animate:false,stateId:null,ddGroup:'organizer',renderAll:function(){Ext.layout.ContainerLayout.prototype.renderAll.apply(this,arguments);this.restorePosition();},renderItem:function(c){var cid=c.sharedId||c.id;if(!this.cmpState.cmps[cid]){this.cmpState.cmps[cid]={collapsed:true};}
var state=this.cmpState.cmps[cid];this.cmpOrder.push(c);this.cmpLookup[cid]=c;if(this.animate===false){c.animCollapse=false;}
c.collapsible=true;c.collapsed=(c.alwaysCollapsed)?true:(c.alwaysExpanded)?false:state.collapsed;if(this.autoWidth){c.autoWidth=true;}
if(this.titleCollapse){c.titleCollapse=true;}
if(this.hideCollapseTool){c.hideCollapseTool=true;}
if(this.collapseFirst!==undefined){c.collapseFirst=this.collapseFirst;}
Ext.layout.ContainerLayout.prototype.renderItem.apply(this,arguments);c.header.addClass('x-accordion-hd');c.on('expand',this.onExpand,this);c.on('collapse',this.onCollapse,this);if(c.movable!==false){c.organizer=this;var ds=new Rack.widget.OrganizerPanelDragSource(c.el,{proxy:this.dragProxy,ddGroup:this.ddGroup});ds.setHandleElId(c.header.id);ds.dragData=c;var dt=new Rack.widget.OrganizerPanelDropTarget(c.el,{ddGroup:this.ddGroup});dt.dropData=c;}},onExpand:function(c){this.cmpState.cmps[c.sharedId||c.id].collapsed=false;this.saveState();},onCollapse:function(c){this.cmpState.cmps[c.sharedId||c.id].collapsed=true;this.saveState();},moveAtoB:function(ca,cb){var targetPos=this.cmpOrder.indexOf(cb);if(this.cmpOrder.indexOf(ca)>targetPos){this.cmpOrder.remove(ca);this.cmpOrder.splice(targetPos,0,ca);ca.el.insertBefore(cb.el);}else{this.cmpOrder.remove(ca);this.cmpOrder.splice(targetPos,0,ca);ca.el.insertAfter(cb.el);}
this.cmpState.order=this.cmpOrder.map(function(c){return c.sharedId||c.id;},this);this.saveState();},insertFirst:function(c){if(c){var parent=this.container.getLayoutTarget();parent.insertFirst(c.el.dom);}},saveState:function(){if(Ext.state.Manager){Ext.state.Manager.set(this.stateId||this.id,this.cmpState);}},getState:function(){var defaultState={cmps:{},order:[]};return(Ext.state.Manager)?Ext.state.Manager.get(this.stateId||this.id,defaultState):defaultState;},restorePosition:function(){var order=this.cmpState.order.map(function(cid){return this.cmpLookup[cid];},this);if(order.length){this.cmpOrder=order;order.slice(0).reverse().forEach(this.insertFirst,this);}}});Ext.Container.LAYOUTS.organizer=Rack.widget.OrganizerLayout;Rack.widget.OrganizerPanelDragSource=Ext.extend(Ext.dd.DragSource,{onInitDrag:function(x,y){var tpl=String.format('Move {0} here',this.dragData.title||'this panel');this.proxy.update(tpl);this.onStartDrag(x,y);return true;}});Rack.widget.OrganizerPanelDropTarget=Ext.extend(Ext.dd.DropTarget,{notifyEnter:function(dd,e,panel){Ext.dd.DropTarget.prototype.notifyEnter.call(this,dd,e,panel);return(panel!==this.dropData)?this.dropAllowed:this.dropNotAllowed;},notifyOver:function(dd,e,panel){return(panel!==this.dropData)?this.dropAllowed:this.dropNotAllowed;},notifyDrop:function(dd,e,panel){if(panel!==this.dropData){panel.organizer.moveAtoB(panel,this.dropData);return true;}
return false;}});(function(){var ns=Rack.widget;(function(){var supercon=Ext.data.DataProxy;var superproto=supercon.prototype;var con=ns.ATMProxy=Ext.extend(supercon,{constructor:function(startTask,scope){this.startTask=startTask;this.taskScope=scope;supercon.call(this);},load:function(params,reader,callback,scope,arg){params=params||{};if(this.fireEvent('beforeload',this,params)===false){callback.call(scope,null,arg,false);return;}
if(!this.startTask){callback.call(scope,null,arg,false);return;}
this.currentRequest=[reader,callback,scope,arg];this.startTask.call(this.taskScope||this,this,params);},finishLoad:function(data,error){var reader=this.currentRequest[0];var callback=this.currentRequest[1];var scope=this.currentRequest[2];var arg=this.currentRequest[3];var result;if(error){this.fireEvent('loadexception',this,arg,error);callback.call(scope,null,arg,false);return;}
try{result=reader.readRecords(data);}catch(e){this.fireEvent('loadexception',this,arg,null,e);callback.call(scope,null,arg,false);return;}
this.fireEvent('load',this,arg,null);callback.call(scope,result,arg,true);return;},update:function(params,records){}});})();Ext.reg('atm-proxy',ns.ATMProxy);})();(function(){var ns=Rack.widget;(function(){var supercon=Ext.form.ComboBox;var superproto=supercon.prototype;var con=ns.SelectBox=Ext.extend(supercon,{constructor:function(config){supercon.call(this,Ext.apply({editable:false,forceSelection:true,triggerAction:'all',mode:'local',stateful:false,listeners:Ext.apply({'beforestatesave':function(){return false;},'beforestaterestore':function(){return false;}},config.listeners||{})},config));}});})();Ext.reg('selectbox',ns.SelectBox);})();(function(){var ns=Rack.widget;(function(){var supercon=Ext.grid.GridPanel;var superproto=supercon.prototype;var con=ns.PagingGridPanel=Ext.extend(supercon,{constructor:function(config){var pagerConfig=config.pager||{};if(config.pageSize){pagerConfig.pageSize=config.pageSize;}
pagerConfig.store=config.store;config.bbar=new Ext.PagingToolbar(pagerConfig);supercon.call(this,config);},reconfigure:function(store,cm){var pager=this.getBottomToolbar();pager.unbind(this.getStore());pager.bind(store);Ext.grid.GridPanel.prototype.reconfigure.call(this,store,cm);},changePage:function(page){this.getBottomToolbar().changePage(page);}});})();Ext.reg('paginggrid',ns.PagingGridPanel);})();(function(){var ns=Rack.widget;(function(){var supercon=Ext.Window;var superproto=supercon.prototype;var con=ns.FitWindow=Ext.extend(supercon,{constructor:function(config){config=Ext.apply({layout:'fit',plain:true,border:false,constrainHeader:true,buttonAlign:'right',stateful:false},config);if(!config.stateful){if(!config.listeners){config.listeners={};}
config.listeners.beforestatesave=function(){return false;};config.listeners.beforestaterestore=function(){return false;};}
supercon.call(this,config);}});})();Ext.reg('fit-window',ns.FitWindow);})();(function(){var ns=Rack.widget;(function(){var supercon=ns.FitWindow;var superproto=supercon.prototype;var con=ns.TabWindow=Ext.extend(supercon,{constructor:function(config){config=config||{};var tabConfig={items:config.items||[]};this.tabPanel=new ns.PlainTabPanel(tabConfig);config.items=this.tabPanel;supercon.call(this,config);},getTabPanel:function(){return this.tabPanel;}});})();Ext.reg('tabwindow',ns.TabWindow);})();(function(){var ns=Rack.widget;(function(){var supercon=Ext.TabPanel;var superproto=supercon.prototype;var con=ns.PlainTabPanel=Ext.extend(supercon,{constructor:function(config){supercon.call(this,Ext.apply({plain:true,activeTab:0,layoutOnTabChange:true,enableTabScroll:true},config));}});})();Ext.reg('plaintabpanel',ns.PlainTabPanel);})();(function(){var ns=Rack.widget;ns.WizardConfig={constructor:function(config){this.nextBtn=new Ext.Button({text:this.msg.NEXT,iconCls:'icn-next',handler:this.onNextBtnClicked,scope:this,minWidth:75});this.previousBtn=new Ext.Button({text:this.msg.PREVIOUS,iconCls:'icn-previous',handler:this.onPreviousBtnClicked,scope:this,minWidth:75});this.space1=new Ext.Toolbar.Spacer();this.space2=new Ext.Toolbar.Spacer();this.cancelBtn=new Ext.Button({text:this.msg.CANCEL,handler:this.onCancelBtnClicked,scope:this});var wizConf={layout:'fit',buttons:[this.previousBtn,this.nextBtn,this.space1,this.space2,this.cancelBtn]};config=Ext.apply(wizConf,config);this.steps=config.items;this.currentPanel=null;this.tabPanel=new ns.PlainTabPanel({items:[config.items]});config.items=this.tabPanel;this.constructor.superclass.constructor.call(this,config);this.addEvents('next','previous','cancel');this.on('render',this.onPanelRendered,this);},msg:{NEXT:'Next',PREVIOUS:'Previous',FINISH:'Finish',CANCEL:'Cancel'},onPanelRendered:function(){if(!this.showCancel){this.hideCancelBtn();}
this.steps=this.tabPanel.items;Ext.each(this.steps,function(step){this.tabPanel.hideTabStripItem(step);},this);this.setActiveStep(0);},onNextBtnClicked:function(){this.fireEvent('next');},hideNextBtn:function(){this.nextBtn.hide();},showNextBtn:function(){this.nextBtn.show();},onPreviousBtnClicked:function(){this.fireEvent('previous');},hidePreviousBtn:function(){this.previousBtn.hide();},showPreviousBtn:function(){this.previousBtn.show();},onCancelBtnClicked:function(){this.fireEvent('cancel');},hideCancelBtn:function(){this.space1.hide();this.space2.hide();this.cancelBtn.hide();},showCancelBtn:function(){this.space1.show();this.space2.show();this.cancelBtn.show();},setActiveStep:function(step){if(this.currentStep){this.tabPanel.hideTabStripItem(this.currentStep);}
this.currentStep=this.steps[step];this.tabPanel.unhideTabStripItem(this.currentStep);this.tabPanel.setActiveTab(this.currentStep);this.tabPanel.doLayout.defer(1,this.tabPanel);},getActiveStep:function(){return this.currentStep;}};ns.WizardPanel=Ext.extend(Ext.Panel,ns.WizardConfig);ns.WizardWindow=Ext.extend(ns.FitWindow,ns.WizardConfig);})();(function(){var ns=Rack.widget;(function(){var supercon=Ext.Panel;var superproto=supercon.prototype;var con=ns.SingleFieldPanel=Ext.extend(supercon,{initComponent:function(){Ext.Panel.prototype.initComponent.apply(this,arguments);this.data=this.data||this.html;delete this.html;this.cls='rack-single-field-panel';},onRender:function(){Ext.Panel.prototype.onRender.apply(this,arguments);this.draw();},redraw:function(){this.draw();},draw:function(){var data=this.data;if(typeof data==='function'){data=data.call(this.scope);}
if(this.renderer){data=this.renderer(data);}
this.body.update(data);}});})();Ext.reg('singlefield',ns.SingleFieldPanel);(function(){var supercon=Ext.Panel;var superproto=supercon.prototype;var con=ns.SingleFieldPanel2=Ext.extend(supercon,{initComponent:function(){Ext.Panel.prototype.initComponent.apply(this,arguments);this.data=this.data||this.html;delete this.html;this.cls='rack-single-field-panel';},onRender:function(){Ext.Panel.prototype.onRender.apply(this,arguments);if(this.data){this.data.addListener(this.onFieldUpdate,this);}
this.draw();},onDestroy:function(){if(this.data){this.data.removeListener(this.onFieldUpdate,this);}
Ext.Panel.prototype.onDestroy.apply(this,arguments);},onFieldUpdate:function(){this.draw();},draw:function(){var data=this.data();if(this.view){data=new this.view(data);}
this.body.update(data.valueOf());}});})();Ext.reg('singlefield2',ns.SingleFieldPanel2);})();(function(){var ns=Rack.widget;(function(){var supercon=Ext.Window;var superproto=supercon.prototype;var con=ns.LoginWindow=Ext.extend(supercon,{constructor:function(){this.userField=new Ext.form.TextField({fieldLabel:'Username',allowBlank:false,anchor:'100%'});this.passField=new Ext.form.TextField({fieldLabel:'Password',inputType:'password',allowBlank:false,anchor:'100%'});supercon.call(this,{title:'Please Log In',iconCls:'icn-user',layout:'fit',width:300,height:160,plain:true,border:false,closable:false,resizable:false,constrainHeader:true,stateful:false,listeners:{'beforestatesave':function(){return false;}},items:{xtype:'form',labelWidth:65,bodyStyle:'padding:5px;',items:[{bodyStyle:'padding:5px 0px 10px;',border:false,html:'<em>You are not currently logged in.  Please log in to continue.</em>'},this.userField,this.passField]},defaultButton:0,buttons:[{text:'Log In',handler:this.onLoginBtnClicked,scope:this}],keys:{key:Ext.EventObject.ENTER,handler:this.onLoginBtnClicked,scope:this}});this.addEvents('login_clicked');},onLoginBtnClicked:function(){this.fireEvent('login_clicked');},setUser:function(user){this.userField.setValue(user);},getUser:function(){return this.userField.getValue();},getPassword:function(){return this.passField.getValue();}});})();Ext.reg('login-window',ns.LoginWindow);})();(function(){var ns=Rack.widget;(function(){var supercon=ns.FitWindow;var superproto=supercon.prototype;var con=ns.IFrameWindow=Ext.extend(supercon,{constructor:function(config){config=config||{};var url=config.url||'about:blank';delete config.url;supercon.call(this,Ext.apply({items:new ns.IFramePanel({url:url}),buttons:[{text:'Close',handler:function(){this.close();},scope:this}]},config));}});})();Ext.reg('iframe-window',ns.IFrameWindow);})();(function(){var ns=Rack.widget;(function(){var supercon=Ext.ux.ManagedIframePanel;var superproto=supercon.prototype;var con=ns.IFramePanel=Ext.extend(supercon,{constructor:function(config){config=config||{};if(config.url&&!config.defaultSrc){config.defaultSrc=config.url;delete config.url;}
supercon.call(this,Ext.apply({tbar:['->',{iconCls:'x-tbar-loading',tooltip:'Reload',handler:this.reload,scope:this}],closable:false,stateful:false,listeners:{'beforestatesave':function(){return false;}}},config));},reload:function(){this.setSrc();}});})();Ext.reg('iframe',ns.IFramePanel);})();(function(){var ns=Rack.widget;(function(){var supercon=Ext.Container;var superproto=supercon.prototype;var con=ns.CardContainer=Ext.extend(supercon,{constructor:function(config){supercon.call(this,Ext.apply({autoEl:'div',layout:'card',layoutConfig:{deferredRender:true},activeItem:0},config||{}));},showView:function(view){if(this.items.indexOf(view)<0){this.add(view);}
if(this.activeItemCls&&this.layout.activeItem){this.layout.activeItem.el.removeClass(this.activeItemCls);}
this.layout.setActiveItem(view);view.doLayout();if(this.activeItemCls){view.el.addClass(this.activeItemCls);}},each:function(fn,scope){this.items.each(fn,scope);}});})();Ext.reg('card-container',ns.CardContainer);})();(function(){var ns=Rack.widget;(function(){var supercon=Ext.Panel;var superproto=supercon.prototype;var con=ns.LoadablePanel=Ext.extend(supercon,{constructor:function(config){supercon.call(this,Ext.apply({autoScroll:true,cls:'rack-panel-pad-body',autoLoad:{url:config.url},tbar:['->',{iconCls:'x-tbar-loading',tooltip:'Reload',handler:this.reload,scope:this}]},config));},reload:function(){this.body.getUpdater().refresh();}});})();Ext.reg('loadablepanel',ns.LoadablePanel);})();(function(){var ns=Rack.widget;(function(){var supercon=Ext.BoxComponent;var superproto=supercon.prototype;var con=ns.SectionButton=Ext.extend(supercon,{constructor:function(config){this.addEvents('click','activated','deactivated','enabled','disabled');supercon.call(this,config);},onRender:function(ct,position){this.el=ct.createChild({tag:'a',href:this.href||'javascript:(function(){return})();',target:this.target||'',id:this.id||this.getId(),cls:this.disabled?'disabled':(this.current?'current':'')},position);this.leftEl=this.el.createChild({tag:'span'});this.rightEl=this.leftEl.createChild({tag:'span'});this.textEl=this.rightEl.createChild({tag:'span',cls:this.text?(this.iconAlign==='right'?'icn-after':'icn-before'):'icn',html:this.text});if(this.iconCls){this.textEl.addClass(this.iconCls);}
this.el.on('click',this.onClick,this);superproto.onRender.call(this,ct,position);},setText:function(t){this.text=t;if(this.rendered){this.textEl.update(t);}},setIcon:function(i){this.iconCls=i;if(this.rendered){return;}
this.textEl.addClass(i);if(this.iconCls){this.textEl.removeClass(this.iconCls);}},setHref:function(l){if(this.rendered){this.el.set({href:l});}
this.href=l;},activate:function(){this.current=true;if(this.rendered){this.el.addClass('current');}
this.fireEvent('activated',this);},deactivate:function(){this.current=false;if(this.rendered){this.el.removeClass('current');}
this.fireEvent('deactivated',this);},disable:function(){this.disabled=true;if(this.rendered){this.el.addClass('disabled');if(this.disabledTip){var tipConfig={target:this.el};if(typeof(this.disabledTip)==='string'){tipConfig.html=this.disabledTip;}else{Ext.apply(tipConfig,this.disabledTip);tipConfig.html=tipConfig.html||tipConfig.text;}
this.disabledTipCmp=new Ext.ToolTip(tipConfig);}}
this.fireEvent('disabled',this);},enable:function(){this.disabled=false;if(!this.rendered){this.el.removeClass('disabled');if(this.disabledTipCmp){this.disabledTipCmp.destroy();}}
this.fireEvent('enabled',this);},onClick:function(e){if(this.disabled){e.stopEvent();return;}
this.fireEvent('click',this,e);}});})();Ext.reg('section-btn',ns.SectionButton);(function(){var supercon=Ext.Panel;var superproto=supercon.prototype;var con=ns.SectionButtonContainer=Ext.extend(supercon,{constructor:function(config){supercon.call(this,Ext.apply({border:false,autoScroll:true,bodyStyle:'background-color:transparent;',defaultType:'section-btn',cls:'section-buttons'},config||{}));}});})();})();(function(){var ns=Rack.widget;(function(){var supercon=Ext.BoxComponent;var superproto=supercon.prototype;var con=ns.Label=Ext.extend(supercon,{constructor:function(config){config=config||{};if(typeof(config)==='string'){config={html:config};}
if(config.text){config.html=config.text;}
this.text=config.html;supercon.call(this,config);},onRender:function(ct,position){if(!this.el){this.el=ct.createChild({html:this.text},position);}
superproto.onRender.apply(this,arguments);},setText:function(text){if(this.rendered){this.el.update(text);}
this.text=text;},getText:function(text){return this.text;}});})();Ext.reg('label',ns.Label);})();(function(){var ns=Rack.widget;(function(){var supercon=ns.CardContainer;var superproto=supercon.prototype;var con=ns.EditableView=Ext.extend(supercon,{constructor:function(property,view,field){this.prop=property;this.mode='view';this.viewCard=new ns.ViewCardFrame(view);this.editCard=new ns.EditCardFrame(field);this.editCard.on({save:this.onSave,cancel:this.onCancel,scope:this});supercon.call(this,{autoHeight:true,autoWidth:true,cls:'rack-editable-view',items:[this.viewCard,this.editCard]});},onSave:function(){},onCancel:function(){this.view();},view:function(){if(this.mode==='view'){return;}
this.mode='view';this.showView(this.viewCard);},edit:function(){if(this.mode==='edit'){return;}
this.mode='edit';this.editCard.standard();this.showView(this.editCard);},inlineEdit:function(){if(this.mode==='inline'){return;}
this.mode='inline';this.editCard.inline();this.showView(this.editCard);}});})();(function(){var supercon=Ext.Container;var superproto=supercon.prototype;var con=ns.ViewCardFrame=Ext.extend(supercon,{constructor:function(view){supercon.call(this,{autoEl:'div',cls:'view-frame',autoHeight:true,autoWidth:true,items:view});}});})();(function(){var supercon=Ext.BoxComponent;var superproto=supercon.prototype;var con=ns.EditCardFrame=Ext.extend(supercon,{constructor:function(field){this.field=field;this.isInline=false;this.addEvents('save','cancel');supercon.call(this,{});},onRender:function(ct,position){this.el=ct.createChild({cls:'edit-frame '+(this.isInline?'inline':'')},position);this.fieldEl=this.el.createChild({});this.field.render(this.fieldEl);this.buttonEl=this.el.createChild({tag:'span',cls:'btn-ct'});this.clearEl=this.el.createChild({style:'clear:both;'});this.saveBtn=new Ext.Button({text:'Save',renderTo:this.buttonEl,listeners:{click:this.onSaveClicked,scope:this}});this.cancelBtn=new Ext.Button({text:'Cancel',renderTo:this.buttonEl,listeners:{click:this.onCancelClicked,scope:this}});superproto.onRender.call(this,ct,position);},onSaveClicked:function(){if(this.field.isValid()){this.fireEvent('save');}},onCancelClicked:function(){this.fireEvent('cancel');},standard:function(){this.isInline=false;if(this.rendered){this.el.removeClass('inline');}},inline:function(){this.isInline=true;if(this.rendered){this.el.addClass('inline');}},doLayout:function(){}});})();(function(){var supercon=ns.EditableView;var superproto=supercon.prototype;var con=ns.EditableContactView=Ext.extend(supercon,{constructor:function(property){supercon.call(this,property,new Rack.service.core.RichContactView(property),new Ext.form.TextField({}));}});})();})();(function(){var ns=Rack.widget;(function(){var supercon=Ext.layout.ColumnLayout;var superproto=supercon.prototype;var con=ns.SimpleColumnLayout=Ext.extend(supercon,{extraCls:'rack-sc-column',isValidParent:function(c,target){return c.getEl().dom.parentNode==this.ct.dom;},onLayout:function(ct,target){var cs=ct.items.items,len=cs.length,c,i;this.ct=ct;target.addClass('rack-sc-row');this.renderAll(ct,this.ct.el);var size=Ext.isIE&&target.dom!=Ext.getBody().dom?target.getStyleSize():target.getViewSize();if(size.width<1&&size.height<1){return;}
var w=size.width-target.getPadding('lr');var el=null;for(i=0;i<len;i++){c=cs[i];el=c.getEl();if(c.columnWidth){c.setSize(Math.floor(c.columnWidth*w-el.getMargins('lr')-0.5));}}}});})();Ext.Container.LAYOUTS['simple-column']=ns.SimpleColumnLayout;})();