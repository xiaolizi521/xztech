<VirtualHost *:80>
	
	ServerName truth2.core.rackspace.com
	DocumentRoot /var/www
	
	RewriteEngine on
	RewriteRule ^(.*)$ https://truth2.core.rackspace.com/$1
	
</VirtualHost>

<VirtualHost *:443>
	
	ServerName truth2.core.rackspace.com
	DocumentRoot /var/www
	
	<Location /svn>

		DAV svn

		SVNParentPath /var/local/svnroot
		SVNListParentPath On
		AuthzSVNAccessFile /etc/apache2/svn/svnusers.conf
		
		AuthType basic
		AuthName "CORE Subversion Repository"
		AuthLDAPUrl ldaps://edir1.dfw1.corp.rackspace.com:636/ou=users,o=rackspace?uid
		AuthLDAPBindDN cn=dhcp,o=rackspace
		AuthLDAPBindPassword gN9W5e34
		require valid-user

	</Location>
	
	include conf/svn/*
	
	SSLEngine on
	SSLCertificateFile /etc/apache2/ssl/t2.wld.crt
	SSLCertificateKeyFile /etc/apache2/ssl/t2.wld.key
	SSLCACertificateFile /etc/apache2/ssl/t2.wld.int

</VirtualHost>


# For legacy apache LDAP config, use the following lines:

#AuthzLDAPEngine on
#AuthzLDAPServer ldap.rackspace.com
#AuthzLDAPUserBase ou=users,o=rackspace
#AuthzLDAPUserKey uid
#AuthzLDAPUserScope base
#AuthLDAPUrl ldap://ldap.rackspace.com/ou=users,o=rackspace?uid?base
